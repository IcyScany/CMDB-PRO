import{a3 as e,H as a,J as s,Q as t,R as o,X as l,F as c,S as n,a6 as r,am as i,$ as u,Y as d,Z as m,c as p,W as v,U as y,ah as _,aV as h,v as b,aY as w,a9 as f,aa as k}from"./index.872a2bd0.js";import{A as g}from"./hardWareApi.e8f3abac.js";import{_ as x}from"./index.fc9664cf.js";const D={class:"overview-container"},j={class:"summary-box"},E=["onClick"],$={class:"summary-title"},A=["src"],C=(e=>(f("data-v-5b75721c"),e=e(),k(),e))((()=>l("div",{class:"summary-border"},null,-1))),H={class:"desc-box"},O={class:"desc-title"},Q={class:"desc-list"},W={class:"desc-label truncate"},Y={class:"desc-value"},z={key:0},F={style:{color:"#888"}},I={key:1},J=e({__name:"index",setup(e){const f=a({overviewData:{}}),k={total:{label:"总数",color:"#4fb050",icon:"kvstore.png",pointer:!0,name:"networkHardwarePage"},status:{label:"状态分布",color:"#e88250"}},J={environment:{label:"环境分布"},typed:{label:"设备类型"},machine_room:{label:"机房分布"}};return s((async()=>{await(async()=>{const e=await g.getOverview({group_by_fields:[["environment"],["typed","brand"],["machine_room"],["status"]]});f.overviewData.total=[{total:"总数",count:e.count}],e.group_by.forEach((e=>{let a=e.fields[0],s=e.items.sort(((e,a)=>a.count-e.count));f.overviewData[a]=s}))})(),await(async()=>{let e=f.overviewData,a=e.typed;a.forEach((e=>{e.typed=e.typed+" "+e.brand})),a.length>5&&(e.typed=a.slice(0,4),e.typed.push({typed:"其他",count:a.slice(4).reduce(((e,a)=>e+a.count),0),other_data:a.slice(4)}));let s=e.machine_room;s.length>5&&(e.machine_room=s.slice(0,4),e.machine_room.push({machine_room:"其他",count:s.slice(4).reduce(((e,a)=>e+a.count),0),other_data:s.slice(4)})),Object.entries(e).forEach((([e,a])=>{a.forEach((a=>{a[e]||(a[e]="其他")}))}))})()})),(e,a)=>{const s=h,g=b,P=x,R=w;return t(),o("div",D,[l("div",j,[(t(),o(c,null,n(k,((a,s)=>l("div",{key:s,class:r(["summary-item",{"cursor-pointer":a.pointer}]),style:i({"--summary-color":a.color}),onClick:s=>a.pointer?e.$router.push({name:a.name}):null},[(t(!0),o(c,null,n(u(f).overviewData[s],((e,n)=>(t(),o(c,{key:n},[l("div",null,[l("div",{class:"summary-value",style:i({"font-size":"total"===s?"32px":""})},d(e.count),5),l("div",$,d(e[s]),1)]),a.icon?(t(),o("img",{key:0,class:"summary-icon",src:`/images/${a.icon}`},null,8,A)):m("",!0),C],64)))),128))],14,E))),64))]),p(R,{title:"资源分布"},{default:v((()=>[l("div",H,[(t(),o(c,null,n(J,((e,a)=>{var i;return l("div",{key:a,class:"desc-card"},[l("div",O,d(e.label),1),l("div",Q,[(t(!0),o(c,null,n(null==(i=u(f).overviewData)?void 0:i[a],(i=>(t(),o("div",{key:i.label,class:r({"two-col":"spec_code"===a})},[p(g,{title:i[a]},{default:v((()=>[l("span",W,[!e.icon||"cloud_source"===a&&"自建"===i.cloud_source?m("",!0):(t(),y(s,{key:0,type:i.cloud_source,style:{width:"22px"}},null,8,["type"])),_(" "+d(i[a])+"： ",1)])])),_:2},1032,["title"]),l("span",Y,[i.other_data?(t(),o("span",z,[p(P,{placement:"right"},{content:v((()=>[(t(!0),o(c,null,n(i.other_data,((c,n)=>(t(),o("div",{key:n},[l("span",F,[e.icon?(t(),y(s,{key:0,type:c.cloud_source,style:{width:"22px"}},null,8,["type"])):m("",!0),_(" "+d(c[a])+": ",1)]),_(" "+d(c.count),1)])))),128))])),default:v((()=>[l("span",null,d(i.count),1)])),_:2},1024)])):(t(),o("span",I,d(i.count),1))])],2)))),128))])])})),64))])])),_:1})])}}},[["__scopeId","data-v-5b75721c"]]);export{J as default};
