import{s as e,_ as a}from"./subPage.2201bfd5.js";import{_ as t}from"./ServerTable.53881589.js";import{b5 as n,al as i,r as l,O as o,Q as r,U as s,W as d,c as u,$ as c,R as p,F as m,S as f,aT as v,a8 as b,aN as _,a3 as g,H as y,ah as h,Y as k,ad as w,ag as A,X as x,Z as C,av as F,ak as E,aS as S,a9 as T,aa as j,J as D,q as P,I as O,au as I,v as R,x as B,a6 as G,aZ as N,aV as U}from"./index.872a2bd0.js";import{_ as Y}from"./index.5101deeb.js";import{t as z}from"./tableRender.a6ff99b7.js";import{o as L,_ as $,u as q}from"./opsFormInit.3a4e1794.js";import{_ as Q}from"./index.029351cd.js";import{A as M}from"./hardWareApi.e8f3abac.js";import{_ as V}from"./index.7d980246.js";import{V as H}from"./index.8820ea9e.js";import"./mode-json.c2c3c146.js";import{S as Z,_ as W}from"./index.6f715054.js";import{_ as K}from"./index.f9557fb2.js";import"./opsDescriptions.dfa169bd.js";import"./index.87ccdcd1.js";import"./index.fc9664cf.js";import"./index.a533313d.js";import"./index.2c670fa1.js";import"./index.fe8e77ef.js";import"./Checkbox.ddee6d58.js";import"./index.9846e408.js";import"./alertLevel.8dae0e72.js";import"./index.44a4e190.js";import"./index.65b2e021.js";import"./index.6e2fd079.js";import"./Group.b415afa6.js";import"./RadioButton.534ff50d.js";import"./index.48209b21.js";import"./index.64f8d8d4.js";import"./opsTable.7b07fc7b.js";import"./useBreakpoint.e81952b0.js";import"./index.e3d002e2.js";import"./eagerComputed.bb706adf.js";import"./index.d14a666b.js";import"./useMaxLevel.bba6798c.js";import"./index.33c07be1.js";import"./dropdown.337fa54f.js";import"./scrollTo.16647b25.js";const X={__name:"edit",props:{open:{type:Boolean,default:!1},sid:{type:[String,Number],default:""},formType:{type:Number,default:n}},emits:["update:open","editSuccess"],setup(e,{emit:a}){const t=e,{open:g,sid:y,formType:h}=i(t),k=a,w=l(null),{putEdit:A,getDetail:x,postAdd:C}=M,{edit_data:F,formRenderContent:E,formDataLoading:S,confirmLoading:T,initForm:j,formDataInit:D,editSubmit:P}=L({formRef:w,TITLE_LAYER:1,formType:h,sid:y,emits:k,addApi:C,editApi:A,oneDataApi:x,customSubmitData:async function(e){e.virtual_team_v3_id||(e.virtual_team_v3_id=null);h.value==n?e.passwd=await v(e.passwd):e.passwd==F.value.passwd?delete e.passwd:e.passwd=await v(e.passwd);return e},customEditData:function(){}});const O=()=>{k("update:open",!1)},I=async e=>{e&&(await j(),await D())};return(e,a)=>{const t=$,n=b,i=_,l=o("vxe-button"),v=Q;return r(),s(v,{title:`${e.$route.meta.title}${c(h)===e.$CONFIG.FORM_TYPE.ADD_TYPE?"新增":"编辑"}`,open:c(g),onAfterOpenChange:I,onClose:O},{footer:d((()=>[u(l,{content:"取消",onClick:O}),u(l,{type:"submit",loading:c(T),status:"primary",content:"提交",onClick:c(P)},null,8,["loading","onClick"])])),default:d((()=>[u(i,{spinning:c(S)},{default:d((()=>[u(n,{ref_key:"formRef",ref:w,model:c(E).formState,rules:c(E).rules},{default:d((()=>[(r(!0),p(m,null,f(e.$utils.filter(c(E).title,(e=>e.edit_display)),(e=>{var a,n;return r(),s(t,{key:e.field,value:c(E).formState[e.field],"onUpdate:value":a=>c(E).formState[e.field]=a,title:e,"title-data":null==(n=null==(a=c(E))?void 0:a.title_data)?void 0:n[e.field]},null,8,["value","onUpdate:value","title","title-data"])})),128))])),_:1},8,["model","rules"])])),_:1},8,["spinning"])])),_:1},8,["title","open"])}}};var J;J={exports:{}},ace.define("ace/theme/github_dark-css",["require","exports","module"],(function(e,a,t){t.exports=".ace-github-dark .ace_gutter {\n  background: #24292e;\n  color: #7388b5\n}\n\n.ace-github-dark .ace_print-margin {\n  width: 1px;\n  background: #00204b\n}\n\n.ace-github-dark {\n  background-color: #24292e;\n  color: #FFFFFF\n}\n\n.ace-github-dark .ace_constant.ace_other,\n.ace-github-dark .ace_cursor {\n  color: #FFFFFF\n}\n\n.ace-github-dark .ace_marker-layer .ace_selection {\n  background: #003F8E\n}\n\n.ace-github-dark.ace_multiselect .ace_selection.ace_start {\n  box-shadow: 0 0 3px 0px #24292e;\n}\n\n.ace-github-dark .ace_marker-layer .ace_step {\n  background: rgb(127, 111, 19)\n}\n\n.ace-github-dark .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid #404F7D\n}\n\n.ace-github-dark .ace_marker-layer .ace_active-line {\n  background: #00346E\n}\n\n.ace-github-dark .ace_gutter-active-line {\n  background-color: #24292e\n}\n\n.ace-github-dark .ace_marker-layer .ace_selected-word {\n  border: 1px solid #003F8E\n}\n\n.ace-github-dark .ace_invisible {\n  color: #404F7D\n}\n\n.ace-github-dark .ace_keyword,\n.ace-github-dark .ace_meta,\n.ace-github-dark .ace_storage,\n.ace-github-dark .ace_storage.ace_type,\n.ace-github-dark .ace_support.ace_type {\n  color: #ff7b72\n}\n\n.ace-github-dark .ace_keyword.ace_operator {\n  color: #79c0ff\n}\n\n.ace-github-dark .ace_constant.ace_character,\n.ace-github-dark .ace_constant.ace_language,\n.ace-github-dark .ace_constant.ace_numeric,\n.ace-github-dark .ace_keyword.ace_other.ace_unit,\n.ace-github-dark .ace_support.ace_constant,\n.ace-github-dark .ace_variable.ace_parameter {\n  color: #FFC58F\n}\n\n.ace-github-dark .ace_invalid {\n  color: #FFFFFF;\n  background-color: #F99DA5\n}\n\n.ace-github-dark .ace_invalid.ace_deprecated {\n  color: #FFFFFF;\n  background-color: #ff7b72\n}\n\n.ace-github-dark .ace_fold {\n  background-color: #BBDAFF;\n  border-color: #FFFFFF\n}\n\n.ace-github-dark .ace_entity.ace_name.ace_function,\n.ace-github-dark .ace_support.ace_function,\n.ace-github-dark .ace_variable {\n  color: #BBDAFF\n}\n\n.ace-github-dark .ace_support.ace_class,\n.ace-github-dark .ace_support.ace_type {\n  color: #FFEEAD\n}\n\n.ace-github-dark .ace_heading,\n.ace-github-dark .ace_markup.ace_heading,\n.ace-github-dark .ace_string {\n  color: #9fcef6\n}\n\n.ace-github-dark .ace_entity.ace_name.ace_tag,\n.ace-github-dark .ace_entity.ace_other.ace_attribute-name,\n.ace-github-dark .ace_meta.ace_tag,\n.ace-github-dark .ace_string.ace_regexp,\n.ace-github-dark .ace_variable {\n  color: #FF9DA4\n}\n\n.ace-github-dark .ace_comment {\n  color: #7285B7\n}\n\n.ace-github-dark .ace_indent-guide {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYJDzqfwPAANXAeNsiA+ZAAAAAElFTkSuQmCC) right repeat-y\n}\n\n.ace-github-dark .ace_indent-guide-active {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQIW2PQ1dX9zzBz5sz/ABCcBFFentLlAAAAAElFTkSuQmCC) right repeat-y;\n}\n\n.ace-github-dark .ace_constant.ace_buildin {\n  color: #0086B3;\n}\n\n.ace-github-dark .ace_variable.ace_language {\n  color: #ffffff;\n}\n  "})),ace.define("ace/theme/github_dark",["require","exports","module","ace/theme/github_dark-css","ace/lib/dom"],(function(e,a,t){a.isDark=!0,a.cssClass="ace-github-dark",a.cssText=e("./github_dark-css"),e("../lib/dom").importCssString(a.cssText,a.cssClass,!1)})),ace.require(["ace/theme/github_dark"],(function(e){J&&(J.exports=e)}));const ee=e=>(T("data-v-06f4ef5a"),e=e(),j(),e),ae={class:"flex font-bold items-center"},te={key:0,class:"flex items-center"},ne=ee((()=>x("span",{class:"border border-solid rounded-md px-1 circle"},"1",-1))),ie=ee((()=>x("span",{class:"border border-solid rounded-md px-1 circle ml-2"},"2",-1))),le=["onClick"],oe={key:0,class:"m-0"},re={key:0,class:"text-error"},se=ee((()=>x("i",{class:"vxe-icon-spinner roll"},null,-1))),de=g({__name:"InterfaceRoutesAdd",props:{open:{type:Boolean,default:!1},sid:{type:Number,default:0},subRow:{type:Object,default:()=>({})},pageTitle:{type:String,default:""},type:{type:String,default:""},formType:{type:Number,default:n}},emits:["update:open","editSuccess"],setup(e,{emit:a}){let t=e,{formType:n,sid:v,subRow:g}=i(t);const T=a;let j=l(null);const{postInterfaceRoutesParse:D,postAddInterface:P}=M;let O=l(null);const{formRenderContent:I,formDataLoading:R,initForm:B,formDataInit:G,editSubmit:N}=L({formRef:j,editTitleLayer:2,sid:v,formType:n,emits:T,addApi:P,customSubmitData:async function(e){var a,t;let n={hardware_sid:null==(a=g.value)?void 0:a.id,analysis_type:g.value.brand};for(let i in e)(null==(t=U[i])?void 0:t.result)&&(n[i]=U[i].result);return n}});let U=y({ip_mask:{loading:!1,value:"",result:"",msg:"",status:"wait"},interface_describe:{loading:!1,value:"",result:"",msg:"",status:"wait"},route_info:{loading:!1,value:"",result:"",msg:"",status:"wait"}});const z={fontSize:13,showPrintMargin:!1,showLineNumbers:!0,tabSize:4,highlightActiveLine:!0},q={ip_mask:{id:0,desc:"终端登录路由器，输入命令（端口清单)",command:{common:"display ip interface brief | no-more",Cisco:"show ip interface"},example:{common:"Interface         IP Address/Mask      Physical   Protocol  VPN\n10GE0/0/8         unassigned           down       down      --\n10GE0/0/9         10.200.4.225/30      up         up        --\n".trim(),Cisco:"\n            Embedded-Service-Engine0/0 is administratively down, line protocol is down\nInternet protocol processing disabled\nGigabitEthernet0/0 is up, line protocol is up\nInternet address is 10.128.1.253/29\nBroadcast address is 255.255.255.255\n                ".trim()},show_example:l(!1)},interface_describe:{id:1,desc:"输入命令（出端口与描述）",command:{common:"display interface description | no-more",Cisco:"show interface description"},example:{common:"Interface   PHY   Protocol   Description\n10GE0/0/8   down  down       --\n10GE0/0/9   up    up         chuizhi-to-AR2".trim(),Cisco:"\n            Interface     Status       Protocol    Description\nEm0/0         admin down   down        --\nGi0/0         up           up          --\nGi0/1         up           up          zhuanxian-to-BaoShan(CPSL00007152)\nGi0/2         up           up          --\n            ".trim()},show_example:l(!1)},route_info:{id:2,desc:"输入命令（路由信息）",command:{common:"display ip routing-table | no-more",Cisco:"show ip route"},field:"routingTable",example:{common:"\n            Destination/Mask  Proto  Pre  Cost  Flags  NextHop        Interface\n3.3.3.0/24        O_ASE  150  20    D      10.200.4.198   GE0/0/1\n\n            ".trim(),Cisco:"\n    O E2     10.0.0.0/16 [110/20] via 10.20.4.21, 7w0d, GigabitEthernet0/1\nO E2     10.1.0.0/16 [110/20] via 10.20.4.23, 7w0d, GigabitEthernet0/1\nO E2     10.2.2.0/24 [110/20] via 10.20.4.2, 7w0d, GigabitEthernet0/1\nO E2     10.2.2.0/24 [110/20] via 10.20.4.2, 7w0d, GigabitEthernet0/1\nO E2     10.2.2.0/24 [110/20] via 10.20.4.2, 7w0d, GigabitEthernet0/1\nO E2     10.3.1.0/24 [110/20] via 10.20.4.2, 7w0d, GigabitEthernet0/1\nO E2     10.4.1.0/24 [110/20] via 10.20.4.2, 7w0d, GigabitEthernet0/1\n            ".trim()},show_example:l(!1)}},Q=async()=>{await(async()=>{U=y({ip_mask:{loading:!1,value:"",result:"",msg:"",status:"wait"},interface_describe:{loading:!1,value:"",result:"",msg:"",status:"wait"},route_info:{loading:!1,value:"",result:"",msg:"",status:"wait"}})})(),await B(),await G()},V=async e=>{var a;U[e].loading=!1,(null==(a=I.value)?void 0:a.formState[e].trim())?await(async({analysis_type:e,analysis_value:a})=>{U[e].loading=!0,U[e].msg="",U[e].result="",O.value=q[e].id,U[e].status="wait",D({analysis_type:e,analysis:a,brand:g.value.brand,interface:g.value.interface}).then((a=>{U[e].loading=!1,U[e].result=(null==a?void 0:a.data)||[],U[e].status="finish"})).catch((a=>{var t,n,i;U[e].loading=!1,U[e].msg=(null==(n=null==(t=null==a?void 0:a.response)?void 0:t.data)?void 0:n.msg)+`(${null==(i=null==a?void 0:a.response)?void 0:i.status})`||"解析失败",U[e].status="error"}))})({analysis_type:e,analysis_value:I.value.formState[e].trim()}):(U[e].status="wait",U[e].result="",U[e].msg="")};const X=y({visible:!1,field:"",data:[],title:""}),J=()=>{X.visible=!1,X.field="",X.data=[],X.title=""},ee=()=>{O.value=null,T("update:open",!1)};return(a,t)=>{const n=Y,i=o("vxe-button"),l=_,v=$,y=Z,T=W,D=b,P=F,B=o("vxe-modal"),G=K,L=E,M=S;return r(),p(m,null,[u(B,{"model-value":e.open,loading:c(R),"show-footer":"",resize:"","mask-closable":!1,onClose:ee,onHide:ee,onShow:Q},{title:d((()=>[h(" NO."+k(c(g).id)+" 【网络设备："+k(c(g).hostname)+"   品牌 ："+k(c(g).brand)+"】 "+k(e.pageTitle)+" 新增 ",1)])),footer:d((()=>{var e,a,t,n,l,o;return[u(P,{class:"mr-2",onClick:ee},{default:d((()=>[h("取消")])),_:1}),u(i,{disabled:!((null==(a=null==(e=c(U))?void 0:e.ip_mask)?void 0:a.result)&&(null==(n=null==(t=c(U))?void 0:t.interface_describe)?void 0:n.result)&&(null==(o=null==(l=c(U))?void 0:l.route_info)?void 0:o.result)),status:"primary",onClick:c(N)},{default:d((()=>[h("提交")])),_:1},8,["disabled","onClick"])]})),default:d((()=>[u(D,{ref_key:"formRef",ref:j,model:c(I).formState,rules:c(I).rules,layout:"vertical"},{default:d((()=>[u(T,{current:c(O),"onUpdate:current":t[0]||(t[0]=e=>w(O)?O.value=e:O=e),direction:"vertical",size:"small",status:"wait"},{default:d((()=>[(r(!0),p(m,null,f(a.$utils.filter(c(I).title,(e=>e.edit_display)),(e=>{var a,t,o,f;return r(),s(y,{key:e.field,status:null==(t=null==(a=c(U))?void 0:a[e.field])?void 0:t.status,disabled:""},A({title:d((()=>{var a,t,i,l,o,d,m,f,v,b;return[x("b",ae,[h(k((null==(a=null==q?void 0:q[e.field])?void 0:a.desc)||e.field)+"： ",1),"Cisco"===(null==(t=c(g))?void 0:t.brand)?(r(),p("span",te,[ne,u(n,{type:"text",content:"terminal length 0",style:{"margin-bottom":"0px"}}),ie,u(n,{type:"text",content:(null==(l=null==(i=null==q?void 0:q[e.field])?void 0:i.command)?void 0:l[c(g).brand])||(null==(d=null==(o=null==q?void 0:q[e.field])?void 0:o.command)?void 0:d.common),style:{"margin-bottom":"0px"}},null,8,["content"])])):(r(),s(n,{key:1,type:"text",content:(null==(f=null==(m=null==q?void 0:q[e.field])?void 0:m.command)?void 0:f[c(g).brand])||(null==(b=null==(v=null==q?void 0:q[e.field])?void 0:v.command)?void 0:b.common)},null,8,["content"]))])]})),description:d((()=>{var a,t,n,o,f,b,_;return[h(" 将得到的数据 "),x("span",{class:"no-underline hover:underline text-primary cursor-pointer",onClick:a=>(e=>{q[e].show_example.value=!q[e].show_example.value;for(let a in q)a===e&&q[a].show_example.value||(q[a].show_example.value=!1)})(e.field)},"（格式示例）",8,le),h(" 粘贴至下方输入框 "),(null==(a=null==q?void 0:q[e.field])?void 0:a.show_example.value)?(r(),p("pre",oe,[x("code",null,k((null==(n=null==(t=null==q?void 0:q[e.field])?void 0:t.example)?void 0:n[c(g).brand])||(null==(f=null==(o=null==q?void 0:q[e.field])?void 0:o.example)?void 0:f.common)),1)])):C("",!0),u(v,{title:e,"title-data":null==(_=null==(b=c(I))?void 0:b.title_data)?void 0:_[e.field],label:null},{label:d((()=>{var a,t,n,l,o;return[h(k(e.field_name)+" ",1),(null==(n=null==(t=null==(a=c(I))?void 0:a.formState)?void 0:t[e.field])?void 0:n.trim())?(r(),p(m,{key:0},[(null==(o=null==(l=c(U))?void 0:l[e.field])?void 0:o.result)?(r(),s(i,{key:0,status:"primary",style:{"line-height":"0%"},content:"解析结果",size:"mini",onClick:a=>((e,a)=>{var t;X.visible=!0,X.field=e,X.data=(null==(t=U[e])?void 0:t.result)||[],X.title=a.field_name})(e.field,e)},null,8,["onClick"])):C("",!0)],64)):C("",!0)]})),default:d((()=>{var a,t;return[u(l,{spinning:null==(t=null==(a=c(U))?void 0:a[e.field])?void 0:t.loading},{default:d((()=>{var a,t,n,i,l,o,s;return[u(c(H),{value:c(I).formState[e.field],"onUpdate:value":a=>c(I).formState[e.field]=a,lang:"javascript",theme:"github_dark",style:{height:"100px"},options:z,onBlur:a=>V(e.field),onChange:a=>{return t=e.field,void(c(I).formState[e.field].trim()||(U[t].status="wait",U[t].result="",U[t].msg=""));var t}},null,8,["value","onUpdate:value","onBlur","onChange"]),(null==(n=null==(t=null==(a=c(I))?void 0:a.formState)?void 0:t[e.field])?void 0:n.trim())?(r(),p(m,{key:0},[(null==(l=null==(i=c(U))?void 0:i[e.field])?void 0:l.msg)?(r(),p("span",re,k(null==(s=null==(o=c(U))?void 0:o[e.field])?void 0:s.msg),1)):C("",!0)],64)):C("",!0)]})),_:2},1032,["spinning"])]})),_:2},1032,["title","title-data"])]})),_:2},[(null==(f=null==(o=c(U))?void 0:o[e.field])?void 0:f.loading)?{name:"icon",fn:d((()=>[se])),key:"0"}:void 0]),1032,["status"])})),128))])),_:1},8,["current"])])),_:1},8,["model","rules"])])),_:1},8,["model-value","loading"]),u(M,{visible:c(X).visible,"onUpdate:visible":t[1]||(t[1]=e=>c(X).visible=e),title:c(X).title+"解析结果",width:"600px",footer:null,onCancel:J},{default:d((()=>[Array.isArray(c(X).data)&&c(X).data.length?(r(),s(G,{key:0,"data-source":c(X).data,columns:Object.keys(c(X).data[0]||{}).map((e=>({title:e,dataIndex:e,key:e}))),pagination:!1,bordered:"",size:"small","row-key":"interface"},null,8,["data-source","columns"])):(r(),s(L,{key:1,description:"暂无解析结果"}))])),_:1},8,["visible","title"])],64)}}},[["__scopeId","data-v-06f4ef5a"]]),ue={key:0},ce=["onClick"],pe=g({__name:"InterfaceRoutes",props:{type:{type:String,default:""},sid:{type:Number,default:0},selectInterface:{type:Object,default:()=>({})},activeTab:{type:String,default:""},subRow:{type:Object,default:()=>({})}},emits:["tab-change","clear-select-interface"],setup(e,{emit:a}){let t=e,{type:n,sid:s,selectInterface:f,subRow:v}=i(t),b=l(null);const{userEdit:_,formOpen:g,formType:A}=q(),F=["华为","H3C","Cisco"],E={interfaces:{interface:"GE0/6",title_layer:2,title:"端口"},routes:{interface:"GE0/0",title_layer:3,title:"路由"}};let S=y({tableColumns:[],initButton:[],tableData:[]}),T=a;const j=async()=>{var e,a;await O(),b.value&&(null==(a=null==(e=b.value)?void 0:e.commitRequest)||a.call(e))};D((async()=>{var e;const{button:a,columns:t}=await z.setColumn({layer:null==(e=null==E?void 0:E[n.value])?void 0:e.title_layer});S.tableColumns=t.value||[],S.initButton=a.value||[],"interfaces"===n.value&&T("clear-select-interface",{}),j()}));const B=P((()=>S.initButton.reduce(((e,a)=>{var t;return e[a.field]="add"===a.field?F.includes(null==(t=v.value)?void 0:t.brand)&&a:a,e}),{}))),G=P((()=>{for(let e of S.tableColumns){let{field:a}=e;if("interface"===a)"interfaces"===n.value&&(e.slots={default:a})}return S.tableColumns}));return(a,t)=>{var i,l;const y=o("FilterOutlined"),F=I,S=R,D=V;return r(),p(m,null,[u(D,{ref_key:"tableRef",ref:b,columns:c(G),"request-config":{api:c(M).getInterfaceRoutes,accept_field:c(n),params:{sid:c(s),...(null==(i=c(f))?void 0:i.interface)&&"routes"===e.activeTab?{type:c(f).interface}:{}}},"auth-btn":c(B),onUserAdd:t[1]||(t[1]=e=>c(_)({type:a.$CONFIG.FORM_TYPE.ADD_TYPE}))},{other_toolbar_buttons:d((()=>{var e;return["routes"===c(n)&&(null==(e=c(f))?void 0:e.interface)?(r(),p("span",ue,[u(y),h(" 端口："),u(F,{closable:"",onClose:t[0]||(t[0]=e=>{c(T)("clear-select-interface",{}),j()})},{default:d((()=>{var e;return[h(k(null==(e=c(f))?void 0:e.interface),1)]})),_:1})])):C("",!0)]})),interface:d((({row:e})=>[u(S,{title:"查看端口路由信息"},{default:d((()=>[x("span",{class:"text-primary cursor-pointer",onClick:a=>(e=>{T("tab-change","routes",e)})(e)},k(e.interface),9,ce)])),_:2},1024)])),_:1},8,["columns","request-config","auth-btn"]),u(de,{open:c(g),"onUpdate:open":t[2]||(t[2]=e=>w(g)?g.value=e:null),sid:c(s),"form-type":c(A),"sub-row":c(v),"page-title":null==(l=null==E?void 0:E[c(n)])?void 0:l.title,onEditSuccess:j},null,8,["open","sid","form-type","sub-row","page-title"])],64)}}},[["__scopeId","data-v-73994c8b"]]),me=["onClick"],fe=(e=>(T("data-v-1dbd1325"),e=e(),j(),e))((()=>x("br",null,null,-1))),ve=["onClick"],be={style:{display:"flex","align-items":"center"}},_e={key:0,class:"custom-tabs"},ge={key:1},ye=g({__name:"index",setup(n){const i=l(null),v=y({initColumn:[],initButton:[],initTitleData:[],tableOrder:{},subPageColumns:[],titleFieldSearch:[]}),{userEdit:b,userDel:_,formOpen:g,formType:F,formSid:E}=q(),S=[{key:"interfaces",title:"端口信息",isCustomTab:!0},{key:"routes",title:"路由信息",isCustomTab:!0}],T=P((()=>{for(let e of v.initColumn){let{field:a}=e;switch(a){case"id":case"passwd":case"status":case"port_route":e.slots={default:a}}}return v.initColumn})),j=P((()=>{const e=["edit","add","del","copy_pwd"];return v.initButton.reduce(((a,t)=>(e.includes(t.field)&&(a[t.field]=t),a)),{})})),I=async()=>{var e;(null==(e=i.value)?void 0:e.serverTableRef)&&i.value.serverTableRef.commitProxy("query")};D((async()=>{const{button:e,columns:a,title_data:t,order:n,sub_page_columns:i,title_field_search:l}=await z.setColumn({layer:1});v.initColumn=a.value||[],v.initButton=e.value||[],v.initTitleData=t.value||{},v.tableOrder=n.value?n.value:{},v.subPageColumns=i||[],v.titleFieldSearch=l.value||[],await O(),await I()}));const L=({type:e,row:a})=>{b({type:e,sid:a.id})},$=({row:e})=>{_({sid:e.id,delApi:M.del,loadData:I})},Q=e=>/^[0-9.]+$/.test(e),V=P((()=>({fields:[{field:"management_ip",operator:"vague",field_name:"管理IP",validate:Q},{field:"description",operator:"vague",field_name:"描述",validate:e=>!Q(e)}],placeholder:"直接输入管理IP、描述"}))),{subPageOpen:H,subPageRow:Z,handleSubPageOpen:W}=e(),K=l("interfaces");let J=l(null),ee=l({});const ae=e=>{ee.value=e};B(H,(()=>{ee.value={}}));const te=(e,a)=>{var t,n;null==(n=(t=J.value).handleTabChange)||n.call(t,e),ae(a)};return(e,n)=>{var l,_,y;const D=N,P=R,O=Y,B=o("vxe-tag"),z=U,q=t,Q=a;return r(),p(m,null,[u(q,{ref_key:"tableRef",ref:i,"auth-btn":c(j),"table-column":c(T),"query-api":c(M).postList,order:c(v).tableOrder,"is-show-doc":!0,"title-field-search":c(v).titleFieldSearch,"default-search-field":c(V),onUserEdit:L,onUserAdd:n[0]||(n[0]=a=>c(b)({type:e.$CONFIG.FORM_TYPE.ADD_TYPE})),onUserDel:$},{id:d((({row:e})=>[u(P,{placement:"topLeft"},{title:d((()=>[u(D,{copyable:{tooltip:!1},class:"copy-text"},{default:d((()=>[h(k(e.uuid),1)])),_:2},1024)])),default:d((()=>[x("span",{class:"cursor-pointer text-primary",onClick:a=>c(W)(e)},k(e.id),9,me)])),_:2},1024)])),passwd:d((({row:e})=>[h(k(e.username)+" ",1),fe,c(j).copy_pwd?(r(),s(O,{key:0,type:"password","api-copy":{copyApi:c(M).getCopyPwd,copyParams:{sid:e.id}}},null,8,["api-copy"])):C("",!0)])),status:d((({row:e})=>[u(P,null,{title:d((()=>{var a,t,n;return[h(k((null==(n=null==(t=null==(a=c(v).initTitleData)?void 0:a.status)?void 0:t.find((a=>a.sta==e.status)))?void 0:n.description)||""),1)]})),default:d((()=>[u(B,{class:G("已上线"==e.status?"theme--success":"下线"==e.status?"theme--error":""),size:"small"},{default:d((()=>[h(k(e.status),1)])),_:2},1032,["class"])])),_:2},1024)])),port_route:d((({row:e})=>[x("span",{class:"text-primary cursor-pointer",onClick:a=>c(W)(e)},"点击查看",8,ve)])),cloud_master_account_id:d((({row:e})=>{var a,t,n;return[x("div",be,[u(z,{type:null==e?void 0:e.cloud_source},null,8,["type"])]),h(" "+k((null==(n=null==(t=null==(a=c(v).initTitleData)?void 0:a.cloud_master_account_id)?void 0:t[e.cloud_master_account_id])?void 0:n.page_display)||""),1)]})),_:1},8,["auth-btn","table-column","query-api","order","title-field-search","default-search-field"]),u(X,{open:c(g),"onUpdate:open":n[1]||(n[1]=e=>w(g)?g.value=e:null),sid:c(E),"form-type":c(F),onEditSuccess:I},null,8,["open","sid","form-type"]),u(Q,{ref_key:"subPageRef",ref:J,open:c(H),"onUpdate:open":n[2]||(n[2]=e=>w(H)?H.value=e:null),"active-tab":c(K),"onUpdate:activeTab":n[3]||(n[3]=e=>w(K)?K.value=e:null),title:`NO.${null==(l=c(Z))?void 0:l.id} ${null==(_=c(Z))?void 0:_.hostname}`,width:"100%","basic-config":{columns:c(v).subPageColumns,api:c(M).getDetail,sid:null==(y=c(Z))?void 0:y.id},"custom-tabs":S,onClickEdit:n[4]||(n[4]=a=>L({type:e.$CONFIG.FORM_TYPE.EDIT_TYPE,row:c(Z)}))},A({status:d((({row:e})=>[u(B,{class:G("已上线"==e.status?"theme--primary":"theme--error"),size:"small"},{default:d((()=>[h(k(e.status),1)])),_:2},1032,["class"])])),passwd:d((({row:e})=>[c(j).copy_pwd?(r(),s(O,{key:0,type:"password","api-copy":{copyApi:c(M).getCopyPwd,copyParams:{sid:e.id}}},null,8,["api-copy"])):(r(),p("span",ge,k(e.passwd),1))])),cloud_master_account_id:d((({row:e})=>{var a,t,n;return[h(k((null==(n=null==(t=null==(a=c(v).initTitleData)?void 0:a.cloud_master_account_id)?void 0:t[e.cloud_master_account_id])?void 0:n.page_display)||""),1)]})),_:2},[f(S,(e=>({name:e.key,fn:d((()=>{var a;return[c(H)&&c(K)===e.key?(r(),p("div",_e,[u(pe,{type:e.key,sid:null==(a=c(Z))?void 0:a.id,"select-interface":c(ee),"active-tab":c(K),"sub-row":c(Z)||{},onTabChange:te,onClearSelectInterface:ae},null,8,["type","sid","select-interface","active-tab","sub-row"])])):C("",!0)]}))})))]),1032,["open","active-tab","title","basic-config"])],64)}}},[["__scopeId","data-v-1dbd1325"]]);export{ye as default};
