import{a3 as a,H as s,J as e,Q as t,R as o,X as c,F as l,S as r,a6 as i,am as n,$ as u,Y as d,Z as p,c as v,W as y,U as _,ah as m,ai as f,aV as b,v as g,aY as w,a9 as x,aa as h}from"./index.872a2bd0.js";import{A as k}from"./cloudWafApi.0df30b42.js";import{_ as E}from"./index.fc9664cf.js";const D={class:"overview-container"},R={class:"summary-box"},j=["onClick"],L={class:"summary-title"},C=["src"],W=(a=>(x("data-v-45ac198d"),a=a(),h(),a))((()=>c("div",{class:"summary-border"},null,-1))),$={class:"desc-box"},A={class:"desc-title"},O={class:"desc-list"},Y={class:"desc-label truncate"},z={class:"desc-value"},F={key:0},H={style:{color:"#888"}},I={key:1},J=a({__name:"index",setup(a){const x=s({overviewData:{},cloudRegionList:[]}),h={total:{label:"总数",color:"#4fb050",icon:"kvstore.png",pointer:!0,name:"cloudWafPage"},access_status:{label:"接入状态",color:"#3c79bf"},protect_status:{label:"防护状态",color:"#e88250"}},J={environment:{label:"环境分布"},cloud_source:{label:"云来源分布"},region_id:{label:"区域分布"},proxy:{label:"是否代理"}};return e((async()=>{await(async()=>{const a=await f.getCloudRegionList();x.cloudRegionList=a;const s=await k.getOverview({group_by_fields:[["environment"],["cloud_source"],["region_id"],["access_status"],["protect_status"],["proxy"]]});x.overviewData.total=[{total:"总数",count:s.count}],s.group_by.forEach((a=>{let s=a.fields[0],e=a.items.sort(((a,s)=>s.count-a.count));x.overviewData[s]=e}))})(),await(async()=>{let a=x.overviewData;a.access_status.forEach((a=>{a.access_status={0:"未接入",1:"接入"}[a.access_status]||a.access_status})),a.protect_status.forEach((a=>{a.protect_status={0:"暂停防护",1:"开启防护"}[a.protect_status]||a.protect_status})),a.proxy.forEach((a=>{a.proxy={0:"未代理",1:"代理"}[a.proxy]||a.proxy})),a.region_id.forEach((a=>{a.region_id=x.cloudRegionList[a.region_id]})),Object.entries(a).forEach((([a,s])=>{s.forEach((s=>{s[a]||(s[a]="其他")}))}))})()})),(a,s)=>{const e=b,f=g,k=E,P=w;return t(),o("div",D,[c("div",R,[(t(),o(l,null,r(h,((s,e)=>c("div",{key:e,class:i(["summary-item",{"cursor-pointer":s.pointer}]),style:n({"--summary-color":s.color}),onClick:e=>s.pointer?a.$router.push({name:s.name}):null},[(t(!0),o(l,null,r(u(x).overviewData[e],((a,r)=>(t(),o(l,{key:r},[c("div",null,[c("div",{class:"summary-value",style:n({"font-size":"total"===e?"32px":""})},d(a.count),5),c("div",L,d(a[e]),1)]),s.icon?(t(),o("img",{key:0,class:"summary-icon",src:`/images/${s.icon}`},null,8,C)):p("",!0),W],64)))),128))],14,j))),64))]),v(P,{title:"资源分布"},{default:y((()=>[c("div",$,[(t(),o(l,null,r(J,((a,s)=>{var n;return c("div",{key:s,class:"desc-card"},[c("div",A,d(a.label),1),c("div",O,[(t(!0),o(l,null,r(null==(n=u(x).overviewData)?void 0:n[s],(n=>(t(),o("div",{key:n.label,class:i({"two-col":"spec_code"===s})},[v(f,{title:n[s]},{default:y((()=>[c("span",Y,[!a.icon||"cloud_source"===s&&"自建"===n.cloud_source?p("",!0):(t(),_(e,{key:0,type:n.cloud_source,style:{width:"22px"}},null,8,["type"])),m(" "+d(n[s])+"： ",1)])])),_:2},1032,["title"]),c("span",z,[n.other_data?(t(),o("span",F,[v(k,{placement:"right"},{content:y((()=>[(t(!0),o(l,null,r(n.other_data,((l,r)=>(t(),o("div",{key:r},[c("span",H,[a.icon?(t(),_(e,{key:0,type:l.cloud_source,style:{width:"22px"}},null,8,["type"])):p("",!0),m(" "+d(l[s])+": ",1)]),m(" "+d(l.count),1)])))),128))])),default:y((()=>[c("span",null,d(n.count),1)])),_:2},1024)])):(t(),o("span",I,d(n.count),1))])],2)))),128))])])})),64))])])),_:1})])}}},[["__scopeId","data-v-45ac198d"]]);export{J as default};
