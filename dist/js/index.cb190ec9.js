import{s as e,_ as t}from"./subPage.2201bfd5.js";import{_ as i}from"./ServerTable.53881589.js";import{b5 as a,al as o,r as l,O as n,Q as r,U as s,W as d,c as u,$ as p,R as m,F as c,S as f,a8 as _,aN as v,a3 as y,H as b,q as g,J as j,ah as x,Y as D,X as C,ad as T,aZ as w,v as k,aV as E,a9 as O,aa as P}from"./index.872a2bd0.js";import{t as S}from"./tableRender.a6ff99b7.js";import{o as R,_ as A,u as F}from"./opsFormInit.3a4e1794.js";import{_ as U}from"./index.029351cd.js";import{A as h}from"./virtualInterfaces.3f033592.js";import"./opsDescriptions.dfa169bd.js";import"./index.87ccdcd1.js";import"./index.fc9664cf.js";import"./index.a533313d.js";import"./index.2c670fa1.js";import"./index.fe8e77ef.js";import"./Checkbox.ddee6d58.js";import"./index.6f715054.js";import"./useBreakpoint.e81952b0.js";import"./index.e3d002e2.js";import"./index.9846e408.js";import"./alertLevel.8dae0e72.js";import"./index.44a4e190.js";import"./index.65b2e021.js";import"./index.6e2fd079.js";import"./Group.b415afa6.js";import"./RadioButton.534ff50d.js";import"./index.48209b21.js";import"./index.64f8d8d4.js";const I={__name:"edit",props:{open:{type:Boolean,default:!1},sid:{type:[String,Number],default:""},formType:{type:Number,default:a}},emits:["update:open","editSuccess"],setup(e,{emit:t}){const i=e,{open:a,sid:y,formType:b}=o(i),g=t,j=l(null),{putEdit:x,getDetail:D,postAdd:C}=h,{formRenderContent:T,formDataLoading:w,confirmLoading:k,initForm:E,formDataInit:O,editSubmit:P}=R({formRef:j,TITLE_LAYER:1,formType:b,sid:y,emits:g,addApi:C,editApi:x,oneDataApi:D,customSubmitData:async function(e){return e},customEditData:function(){}});const S=()=>{g("update:open",!1)},F=async e=>{e&&(await E(),await O())};return(e,t)=>{const i=A,o=_,l=v,y=n("vxe-button"),g=U;return r(),s(g,{title:`${e.$route.meta.title}${p(b)===e.$CONFIG.FORM_TYPE.ADD_TYPE?"新增":"编辑"}`,open:p(a),onAfterOpenChange:F,onClose:S},{footer:d((()=>[u(y,{content:"取消",onClick:S}),u(y,{type:"submit",loading:p(k),status:"primary",content:"提交",onClick:p(P)},null,8,["loading","onClick"])])),default:d((()=>[u(l,{spinning:p(w)},{default:d((()=>[u(o,{ref_key:"formRef",ref:j,model:p(T).formState,rules:p(T).rules},{default:d((()=>[(r(!0),m(c,null,f(e.$utils.filter(p(T).title,(e=>e.edit_display)),(e=>{var t,a,o,l;return r(),m(c,{key:e.field},[""===e.field?(r(),s(i,{key:0,value:p(T).formState[e.field],"onUpdate:value":t=>p(T).formState[e.field]=t,title:e,"title-data":null==(a=null==(t=p(T))?void 0:t.title_data)?void 0:a[e.field]},null,8,["value","onUpdate:value","title","title-data"])):(r(),s(i,{key:1,value:p(T).formState[e.field],"onUpdate:value":t=>p(T).formState[e.field]=t,title:e,"title-data":null==(l=null==(o=p(T))?void 0:o.title_data)?void 0:l[e.field]},null,8,["value","onUpdate:value","title","title-data"]))],64)})),128))])),_:1},8,["model","rules"])])),_:1},8,["spinning"])])),_:1},8,["title","open"])}}},L=["onClick"],Y=["onClick"],$={style:{display:"flex","align-items":"center"}},B=(e=>(O("data-v-9bf227ef"),e=e(),P(),e))((()=>C("br",null,null,-1))),N=y({__name:"index",setup(a){const o=l(null),n=b({initColumn:[],initButton:[],initTitleData:[],tableOrder:{},subPageColumns:[]}),{userEdit:s,userDel:f,formOpen:_,formType:v,formSid:y}=F(),O=g((()=>{for(let e of n.initColumn){let{field:t}=e;switch(t){case"id":case"name":e.slots={default:t},e.showOverflow="title";break;case"virtual_team_v3_id":e.showOverflow=!1}}return n.initColumn})),P=g((()=>{const e=["edit","add","del"];return n.initButton.reduce(((t,i)=>(e.includes(i.field)&&(t[i.field]=i),t)),{})}));j((async()=>{const{button:e,columns:t,title_data:i,order:a,sub_page_columns:o}=await S.setColumn({layer:1});n.initColumn=t.value||[],n.initButton=e.value||[],n.initTitleData=i.value||[],n.tableOrder=a.value||{},n.subPageColumns=o||[],await R()}));const R=async()=>{o.value&&await o.value.serverTableRef.commitProxy("query")},A=({type:e,row:t})=>{s({type:e,sid:t.id})},U=({row:e})=>{f({sid:e.id,delApi:h.del,loadData:R})},{subPageOpen:N,subPageRow:q,handleSubPageOpen:G}=e();return(e,a)=>{var l,f;const b=w,g=k,j=E,S=i,F=t;return r(),m(c,null,[u(S,{ref_key:"tableRef",ref:o,"table-column":p(O),"auth-btn":p(P),order:p(n).tableOrder,"query-api":p(h).postList,onUserEdit:A,onUserAdd:a[0]||(a[0]=t=>p(s)({type:e.$CONFIG.FORM_TYPE.ADD_TYPE})),onUserDel:U},{id:d((({row:e})=>[u(g,{placement:"topLeft"},{title:d((()=>[u(b,{copyable:{tooltip:!1},class:"copy-text"},{default:d((()=>[x(D(e.virtual_interfaces_id),1)])),_:2},1024)])),default:d((()=>[C("span",{class:"cursor-pointer text-primary",onClick:t=>p(G)(e)},D(e.id),9,L)])),_:2},1024)])),name:d((({row:e})=>[u(g,{placement:"topLeft"},{title:d((()=>[u(b,{copyable:{tooltip:!1},class:"tooltip-text"},{default:d((()=>[x(D(e.name),1)])),_:2},1024)])),default:d((()=>[C("span",{class:"cursor-pointer text-primary",onClick:t=>p(G)(e)},D(e.name),9,Y)])),_:2},1024)])),cloud_master_account_id:d((({row:e})=>{var t,i,a;return[C("div",$,[u(j,{type:e.cloud_source},null,8,["type"])]),x(" "+D((null==(a=null==(i=null==(t=p(n).initTitleData)?void 0:t.cloud_master_account_id)?void 0:i[e.cloud_master_account_id])?void 0:a.page_display)||""),1)]})),region_id:d((({row:e})=>{var t,i,a;return[x(D(e.zone_id),1),B,x(" "+D((null==(t=p(n).initTitleData)?void 0:t.region_id)&&(null==(a=null==(i=p(n).initTitleData)?void 0:i.region_id)?void 0:a[e.region_id])||e.region_id),1)]})),_:1},8,["table-column","auth-btn","order","query-api"]),u(I,{open:p(_),"onUpdate:open":a[1]||(a[1]=e=>T(_)?_.value=e:null),sid:p(y),"form-type":p(v),onEditSuccess:R},null,8,["open","sid","form-type"]),u(F,{open:p(N),"onUpdate:open":a[2]||(a[2]=e=>T(N)?N.value=e:null),title:null==(l=p(q))?void 0:l.virtual_interfaces_id,"basic-config":{columns:p(n).subPageColumns,api:p(h).getDetail,sid:null==(f=p(q))?void 0:f.id},onClickEdit:a[3]||(a[3]=t=>A({type:e.$CONFIG.FORM_TYPE.EDIT_TYPE,row:p(q)}))},{cloud_master_account_id:d((({row:e})=>{var t,i,a;return[x(D((null==(a=null==(i=null==(t=p(n).initTitleData)?void 0:t.cloud_master_account_id)?void 0:i[e.cloud_master_account_id])?void 0:a.page_display)||""),1)]})),region_id:d((({row:e})=>{var t,i,a;return[x(D((null==(t=p(n).initTitleData)?void 0:t.region_id)&&(null==(a=null==(i=p(n).initTitleData)?void 0:i.region_id)?void 0:a[e.region_id])||e.region_id),1)]})),_:1},8,["open","title","basic-config"])],64)}}},[["__scopeId","data-v-9bf227ef"]]);export{N as default};
