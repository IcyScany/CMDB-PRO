import{s as e}from"./scheduledTasksApi.721351f3.js";import{a3 as s,r as a,J as t,q as l,O as c,$ as r,Q as n,R as i,X as u,F as m,S as o,am as d,Y as v,Z as y,a6 as b,c as x,W as k,ah as h,U as _,ak as p,a9 as f,aa as g}from"./index.872a2bd0.js";const $=e=>(f("data-v-6734fdc9"),e=e(),g(),e),w={key:0},F={key:0,class:"overview-container"},j={class:"summary-box"},O={class:"summary-data"},T={class:"summary-value",style:{"font-size":"26px"}},z={class:"summary-title"},I=$((()=>u("div",{class:"summary-border"},null,-1))),S={key:0,class:"summary-icon"},q=[$((()=>u("img",{src:"/images/kvstore.png"},null,-1)))],A={key:0,class:"execution-table-card"},E=$((()=>u("h3",{class:"table-title"},"最近执行时间最长的任务 (Top 10)",-1))),J={class:"border-collapse border custom-table custom-table-bordered"},Q=$((()=>u("thead",null,[u("tr",null,[u("th",{class:"text-center"},"排名"),u("th",{class:"text-center"},"任务名称"),u("th",{class:"text-center"},"环境"),u("th",{class:"text-center"},"最后一次执行时长")])],-1))),R={class:"text-center"},U={class:"text-center"},W={class:"text-center"},X={class:"text-center execution-time"},Y=$((()=>u("div",{class:"summary-border",style:{background:"#3c79bf"}},null,-1))),Z=s({__name:"overview",setup(s){const f=a({});t((async()=>{try{const s=await e.getScheduledTasksOverview();f.value=s||{}}catch(s){}}));const g={0:"#4fb050",1:"#e88250",2:"#3c79bf",3:"#4fb050"},$=l((()=>f.value.section1||[])),Z=l((()=>f.value.top_execution_time_tasks||[]));const B=l((()=>{if(!$.value.length)return{};const e={};return $.value.forEach(((s,a)=>{"number"==typeof s.items?e[`item_${a}`]={[s.label]:s.items}:e[`item_${a}`]=s.items})),e}));return(e,s)=>{const a=c("vxe-tag"),t=p;return Object.keys(r(f)).length>0?(n(),i("div",w,[$.value.length>0?(n(),i("div",F,[u("div",j,[(n(!0),i(m,null,o(B.value,((e,s)=>(n(),i("div",{key:s,class:"summary-item",style:d({"--summary-color":g[parseInt(s.split("_")[1])]})},[(n(!0),i(m,null,o(e,((e,s)=>(n(),i("div",{key:s},[u("div",O,[u("div",T,v(e),1),u("div",z,v(s),1)]),I])))),128)),"item_0"===s?(n(),i("div",S,q)):y("",!0)],4)))),128))]),Z.value.length>0?(n(),i("div",A,[E,u("table",J,[Q,u("tbody",null,[(n(!0),i(m,null,o(Z.value,((e,s)=>{return n(),i("tr",{key:e.task_id},[u("td",R,[u("span",{class:b(["rank-badge",`rank-${s+1}`])},v(s+1),3)]),u("td",U,v(e.name),1),u("td",W,[x(a,{class:b(["生产环境"===e.environment?"theme--warning":"theme--success","m-1"]),size:"small"},{default:k((()=>[h(v(e.environment),1)])),_:2},1032,["class"])]),u("td",X,v((t=e.avg_execution_time,0===t?"0秒":t<60?`${t.toFixed(2)}秒`:t<3600?`${(t/60).toFixed(2)}分钟`:`${(t/3600).toFixed(2)}小时`)),1)]);var t})),128))])]),Y])):y("",!0)])):(n(),_(t,{key:1}))])):(n(),_(t,{key:1}))}}},[["__scopeId","data-v-6734fdc9"]]);export{Z as default};
