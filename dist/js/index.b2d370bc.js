import{s as e,_ as t}from"./subPage.2201bfd5.js";import{_ as i}from"./ServerTable.53881589.js";import{aR as a,b5 as o,al as l,r as n,O as r,Q as s,U as d,W as u,c as p,$ as m,R as c,F as f,S as _,a8 as v,aN as y,H as g,q as b,J as j,ah as x,Y as D,X as w,ad as C,aZ as T,v as k,aV as S}from"./index.872a2bd0.js";import{t as h}from"./tableRender.a6ff99b7.js";import{o as O,_ as E,u as R}from"./opsFormInit.3a4e1794.js";import{_ as P}from"./index.029351cd.js";import"./opsDescriptions.dfa169bd.js";import"./index.87ccdcd1.js";import"./index.fc9664cf.js";import"./index.a533313d.js";import"./index.2c670fa1.js";import"./index.fe8e77ef.js";import"./Checkbox.ddee6d58.js";import"./index.6f715054.js";import"./useBreakpoint.e81952b0.js";import"./index.e3d002e2.js";import"./index.9846e408.js";import"./alertLevel.8dae0e72.js";import"./index.44a4e190.js";import"./index.65b2e021.js";import"./index.6e2fd079.js";import"./Group.b415afa6.js";import"./RadioButton.534ff50d.js";import"./index.48209b21.js";import"./index.64f8d8d4.js";const $="network/direct-connects/",F={postList:e=>a.post(`${$}list`,e),getDetail:e=>a.get(`${$}list/${e}`),putEdit:(e,t)=>a.put(`${$}edit/${e}`,t)},A={__name:"edit",props:{open:{type:Boolean,default:!1},sid:{type:[String,Number],default:""},formType:{type:Number,default:o}},emits:["update:open","editSuccess"],setup(e,{emit:t}){const i=e,{open:a,sid:o,formType:g}=l(i),b=t,j=n(null),{putEdit:x,getDetail:D,postAdd:w}=F,{formRenderContent:C,formDataLoading:T,confirmLoading:k,initForm:S,formDataInit:h,editSubmit:R}=O({formRef:j,TITLE_LAYER:1,formType:g,sid:o,emits:b,addApi:w,editApi:x,oneDataApi:D,customSubmitData:async function(e){return e},customEditData:function(){}});const $=()=>{b("update:open",!1)},A=async e=>{e&&(await S(),await h())};return(e,t)=>{const i=E,o=v,l=y,n=r("vxe-button"),b=P;return s(),d(b,{title:`${e.$route.meta.title}${m(g)===e.$CONFIG.FORM_TYPE.ADD_TYPE?"新增":"编辑"}`,open:m(a),onAfterOpenChange:A,onClose:$},{footer:u((()=>[p(n,{content:"取消",onClick:$}),p(n,{type:"submit",loading:m(k),status:"primary",content:"提交",onClick:m(R)},null,8,["loading","onClick"])])),default:u((()=>[p(l,{spinning:m(T)},{default:u((()=>[p(o,{ref_key:"formRef",ref:j,model:m(C).formState,rules:m(C).rules},{default:u((()=>[(s(!0),c(f,null,_(e.$utils.filter(m(C).title,(e=>e.edit_display)),(e=>{var t,a,o,l;return s(),c(f,{key:e.field},[""===e.field?(s(),d(i,{key:0,value:m(C).formState[e.field],"onUpdate:value":t=>m(C).formState[e.field]=t,title:e,"title-data":null==(a=null==(t=m(C))?void 0:t.title_data)?void 0:a[e.field]},null,8,["value","onUpdate:value","title","title-data"])):(s(),d(i,{key:1,value:m(C).formState[e.field],"onUpdate:value":t=>m(C).formState[e.field]=t,title:e,"title-data":null==(l=null==(o=m(C))?void 0:o.title_data)?void 0:l[e.field]},null,8,["value","onUpdate:value","title","title-data"]))],64)})),128))])),_:1},8,["model","rules"])])),_:1},8,["spinning"])])),_:1},8,["title","open"])}}},U=["onClick"],L=["onClick"],B={style:{display:"flex","align-items":"center"}},Y={__name:"index",setup(a){const o=n(null),l=g({initColumn:[],initButton:[],initTitleData:[],tableOrder:{},titleFieldSearch:[],subPageColumns:[]}),{userEdit:r,userDel:d,formOpen:_,formType:v,formSid:y}=R(),O=b((()=>{for(let e of l.initColumn){let{field:t}=e;switch(t){case"id":case"region_id":case"name":e.slots={default:t},e.showOverflow="ellipsis";break;case"virtual_team_v3_id":e.showOverflow=!1}}return l.initColumn})),E=b((()=>l.initButton.reduce(((e,t)=>(e[t.field]=t,e)),{})));j((async()=>{const{button:e,columns:t,title_data:i,order:a,title_field_search:o,sub_page_columns:n}=await h.setColumn({layer:1});l.initColumn=t.value||[],l.initButton=e.value||[],l.initTitleData=i.value||[],l.tableOrder=a.value||{},l.titleFieldSearch=o.value||[],l.subPageColumns=n||[],await P()}));const P=async()=>{o.value&&await o.value.serverTableRef.commitProxy("query")},$=({type:e,row:t})=>{r({type:e,sid:t.id})},Y=({row:e})=>{d({sid:e.id,delApi:F.del,loadData:P})},{subPageOpen:q,subPageRow:I,handleSubPageOpen:N}=e();return(e,a)=>{var n,d;const g=T,b=k,j=S,h=i,R=t;return s(),c(f,null,[p(h,{ref_key:"tableRef",ref:o,"table-column":m(O),"auth-btn":m(E),order:m(l).tableOrder,"query-api":m(F).postList,"title-field-search":m(l).titleFieldSearch,onUserEdit:$,onUserAdd:a[0]||(a[0]=t=>m(r)({type:e.$CONFIG.FORM_TYPE.ADD_TYPE})),onUserDel:Y},{id:u((({row:e})=>[p(b,{placement:"topLeft"},{title:u((()=>[p(g,{copyable:{tooltip:!1},class:"tooltip-text"},{default:u((()=>[x(D(e.direct_connects_id),1)])),_:2},1024)])),default:u((()=>[w("span",{class:"cursor-pointer text-primary",onClick:t=>m(N)(e)},D(e.id),9,U)])),_:2},1024)])),name:u((({row:e})=>[p(b,{placement:"topLeft"},{title:u((()=>[p(g,{copyable:{tooltip:!1},class:"tooltip-text"},{default:u((()=>[x(D(e.name),1)])),_:2},1024)])),default:u((()=>[w("span",{class:"cursor-pointer text-primary",onClick:t=>m(N)(e)},D(e.name),9,L)])),_:2},1024)])),cloud_master_account_id:u((({row:e})=>{var t,i,a;return[w("div",B,[p(j,{type:e.cloud_source},null,8,["type"])]),x(" "+D((null==(a=null==(i=null==(t=m(l).initTitleData)?void 0:t.cloud_master_account_id)?void 0:i[e.cloud_master_account_id])?void 0:a.page_display)||""),1)]})),region_id:u((({row:e})=>{var t,i,a;return[x(D((null==(t=m(l).initTitleData)?void 0:t.region_id)&&(null==(a=null==(i=m(l).initTitleData)?void 0:i.region_id)?void 0:a[e.region_id])||e.region_id),1)]})),_:1},8,["table-column","auth-btn","order","query-api","title-field-search"]),p(A,{open:m(_),"onUpdate:open":a[1]||(a[1]=e=>C(_)?_.value=e:null),sid:m(y),"form-type":m(v),onEditSuccess:P},null,8,["open","sid","form-type"]),p(R,{open:m(q),"onUpdate:open":a[2]||(a[2]=e=>C(q)?q.value=e:null),title:null==(n=m(I))?void 0:n.direct_connects_id,"basic-config":{columns:m(l).subPageColumns,api:m(F).getDetail,sid:null==(d=m(I))?void 0:d.id}},{cloud_master_account_id:u((({row:e})=>{var t,i,a;return[x(D((null==(a=null==(i=null==(t=m(l).initTitleData)?void 0:t.cloud_master_account_id)?void 0:i[e.cloud_master_account_id])?void 0:a.page_display)||""),1)]})),region_id:u((({row:e})=>{var t,i,a;return[x(D((null==(t=m(l).initTitleData)?void 0:t.region_id)&&(null==(a=null==(i=m(l).initTitleData)?void 0:i.region_id)?void 0:a[e.region_id])||e.region_id),1)]})),_:1},8,["open","title","basic-config"])],64)}}};export{Y as default};
