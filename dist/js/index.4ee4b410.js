import{s as e,_ as t}from"./subPage.2201bfd5.js";import{_ as i}from"./ServerTable.53881589.js";import{_ as l}from"./opsDescriptions.dfa169bd.js";import{aR as a,b5 as o,al as n,r,O as s,Q as u,U as d,W as p,c,$ as m,R as _,F as f,S as v,a8 as y,aN as g,H as b,q as x,J as j,ah as w,Y as k,X as D,Z as C,ad as h,aZ as T,v as E,aV as S}from"./index.872a2bd0.js";import{t as O}from"./tableRender.a6ff99b7.js";import{o as R,_ as P,u as $}from"./opsFormInit.3a4e1794.js";import{_ as F}from"./index.029351cd.js";import"./index.2c670fa1.js";import"./index.fe8e77ef.js";import"./Checkbox.ddee6d58.js";import"./index.6f715054.js";import"./useBreakpoint.e81952b0.js";import"./index.e3d002e2.js";import"./index.fc9664cf.js";import"./index.9846e408.js";import"./index.87ccdcd1.js";import"./index.a533313d.js";import"./alertLevel.8dae0e72.js";import"./index.44a4e190.js";import"./index.65b2e021.js";import"./index.6e2fd079.js";import"./Group.b415afa6.js";import"./RadioButton.534ff50d.js";import"./index.48209b21.js";import"./index.64f8d8d4.js";const N="network/virtual-gateway/",A={postList:e=>a.post(`${N}list`,e),getDetail:e=>a.get(`${N}list/${e}`),putEdit:(e,t)=>a.put(`${N}edit/${e}`,t)},G={__name:"edit",props:{open:{type:Boolean,default:!1},sid:{type:[String,Number],default:""},formType:{type:Number,default:o}},emits:["update:open","editSuccess"],setup(e,{emit:t}){const i=e,{open:l,sid:a,formType:o}=n(i),b=t,x=r(null),{putEdit:j,getDetail:w,postAdd:k}=A,{formRenderContent:D,formDataLoading:C,confirmLoading:h,initForm:T,formDataInit:E,editSubmit:S}=R({formRef:x,TITLE_LAYER:1,formType:o,sid:a,emits:b,addApi:k,editApi:j,oneDataApi:w,customSubmitData:async function(e){return e},customEditData:function(){}});const O=()=>{b("update:open",!1)},$=async e=>{e&&(await T(),await E())};return(e,t)=>{const i=P,a=y,n=g,r=s("vxe-button"),b=F;return u(),d(b,{title:`${e.$route.meta.title}${m(o)===e.$CONFIG.FORM_TYPE.ADD_TYPE?"新增":"编辑"}`,open:m(l),onAfterOpenChange:$,onClose:O},{footer:p((()=>[c(r,{content:"取消",onClick:O}),c(r,{type:"submit",loading:m(h),status:"primary",content:"提交",onClick:m(S)},null,8,["loading","onClick"])])),default:p((()=>[c(n,{spinning:m(C)},{default:p((()=>[c(a,{ref_key:"formRef",ref:x,model:m(D).formState,rules:m(D).rules},{default:p((()=>[(u(!0),_(f,null,v(e.$utils.filter(m(D).title,(e=>e.edit_display)),(e=>{var t,l,a,o;return u(),_(f,{key:e.field},[""===e.field?(u(),d(i,{key:0,value:m(D).formState[e.field],"onUpdate:value":t=>m(D).formState[e.field]=t,title:e,"title-data":null==(l=null==(t=m(D))?void 0:t.title_data)?void 0:l[e.field]},null,8,["value","onUpdate:value","title","title-data"])):(u(),d(i,{key:1,value:m(D).formState[e.field],"onUpdate:value":t=>m(D).formState[e.field]=t,title:e,"title-data":null==(o=null==(a=m(D))?void 0:a.title_data)?void 0:o[e.field]},null,8,["value","onUpdate:value","title","title-data"]))],64)})),128))])),_:1},8,["model","rules"])])),_:1},8,["spinning"])])),_:1},8,["title","open"])}}},U=["onClick"],L=["onClick"],B={style:{display:"flex","align-items":"center"}},Y={key:0,class:"truncate text-primary"},q=["onClick"],I={__name:"index",setup(a){const o=r(null),n=b({initColumn:[],initButton:[],initTitleData:[],tableOrder:{},titleFieldSearch:[],subPageColumns:[],localEpGroupNum:4}),{userEdit:s,userDel:d,formOpen:y,formType:g,formSid:R}=$(),P=x((()=>{for(let e of n.initColumn){let{field:t}=e;switch(t){case"id":case"vpc_id":case"region_id":case"name":e.slots={default:t},e.showOverflow="ellipsis";break;case"virtual_team_v3_id":e.showOverflow=!1}}return n.initColumn})),F=x((()=>n.initButton.reduce(((e,t)=>(e[t.field]=t,e)),{})));j((async()=>{const{button:e,columns:t,title_data:i,order:l,title_field_search:a,sub_page_columns:o}=await O.setColumn({layer:1});n.initColumn=t.value||[],n.initButton=e.value||[],n.initTitleData=i.value||[],n.tableOrder=l.value||{},n.titleFieldSearch=a.value||[],n.subPageColumns=o||[],await N()}));const N=async()=>{o.value&&await o.value.serverTableRef.commitProxy("query")},I=({type:e,row:t})=>{s({type:e,sid:t.id})},H=({row:e})=>{d({sid:e.id,delApi:A.del,loadData:N})},{subPageOpen:M,subPageRow:Z,handleSubPageOpen:z}=e();return(e,a)=>{var r,d;const b=T,x=E,j=S,O=l,$=i,J=t;return u(),_(f,null,[c($,{ref_key:"tableRef",ref:o,"table-column":m(P),"auth-btn":m(F),order:m(n).tableOrder,"query-api":m(A).postList,"title-field-search":m(n).titleFieldSearch,onUserEdit:I,onUserAdd:a[0]||(a[0]=t=>m(s)({type:e.$CONFIG.FORM_TYPE.ADD_TYPE})),onUserDel:H},{id:p((({row:e})=>[c(x,{placement:"topLeft"},{title:p((()=>[c(b,{copyable:{tooltip:!1},class:"tooltip-text"},{default:p((()=>[w(k(e.virtual_gateway_id),1)])),_:2},1024)])),default:p((()=>[D("span",{class:"cursor-pointer text-primary",onClick:t=>m(z)(e)},k(e.id),9,U)])),_:2},1024)])),name:p((({row:e})=>[c(x,{placement:"topLeft"},{title:p((()=>[c(b,{copyable:{tooltip:!1},class:"tooltip-text"},{default:p((()=>[w(k(e.name),1)])),_:2},1024)])),default:p((()=>[D("span",{class:"cursor-pointer text-primary",onClick:t=>m(z)(e)},k(e.name),9,L)])),_:2},1024)])),cloud_master_account_id:p((({row:e})=>{var t,i,l;return[D("div",B,[c(j,{type:e.cloud_source},null,8,["type"])]),w(" "+k((null==(l=null==(i=null==(t=m(n).initTitleData)?void 0:t.cloud_master_account_id)?void 0:i[e.cloud_master_account_id])?void 0:l.page_display)||""),1)]})),region_id:p((({row:e})=>{var t,i,l;return[w(k((null==(t=m(n).initTitleData)?void 0:t.region_id)&&(null==(l=null==(i=m(n).initTitleData)?void 0:i.region_id)?void 0:l[e.region_id])||e.region_id),1)]})),vpc_id:p((({row:e})=>[e.vpc_id?(u(),_("div",Y,[c(O,{"obj-type":"hw_vpc",uuid:e.vpc_id},null,8,["uuid"])])):C("",!0)])),_:1},8,["table-column","auth-btn","order","query-api","title-field-search"]),c(G,{open:m(y),"onUpdate:open":a[1]||(a[1]=e=>h(y)?y.value=e:null),sid:m(R),"form-type":m(g),onEditSuccess:N},null,8,["open","sid","form-type"]),c(J,{open:m(M),"onUpdate:open":a[3]||(a[3]=e=>h(M)?M.value=e:null),title:null==(r=m(Z))?void 0:r.virtual_gateway_id,"basic-config":{columns:m(n).subPageColumns,api:m(A).getDetail,sid:null==(d=m(Z))?void 0:d.id}},{cloud_master_account_id:p((({row:e})=>{var t,i,l;return[w(k((null==(l=null==(i=null==(t=m(n).initTitleData)?void 0:t.cloud_master_account_id)?void 0:i[e.cloud_master_account_id])?void 0:l.page_display)||""),1)]})),region_id:p((({row:e})=>{var t,i,l;return[w(k((null==(t=m(n).initTitleData)?void 0:t.region_id)&&(null==(l=null==(i=m(n).initTitleData)?void 0:i.region_id)?void 0:l[e.region_id])||e.region_id),1)]})),local_ep_group:p((({row:e})=>{var t,i,l,o;return[(null==(t=e.local_ep_group)?void 0:t.length)>0?(u(),_(f,{key:0},[(u(!0),_(f,null,v(null==(i=e.local_ep_group)?void 0:i.slice(0,m(n).localEpGroupNum),(e=>(u(),_("div",{key:e},k(e),1)))),128)),(null==(l=e.local_ep_group)?void 0:l.length)>m(n).localEpGroupNum?(u(),_("span",{key:0,class:"text-primary cursor-pointer",onClick:t=>{var i;return m(n).localEpGroupNum=null==(i=e.local_ep_group)?void 0:i.length}}," 查看更多（"+k((null==(o=e.local_ep_group)?void 0:o.length)-m(n).localEpGroupNum)+"） ",9,q)):(u(),_("span",{key:1,class:"text-primary cursor-pointer",onClick:a[2]||(a[2]=e=>m(n).localEpGroupNum=4)}," 收起 "))],64)):(u(),_(f,{key:1},[w(" -- ")],64))]})),_:1},8,["open","title","basic-config"])],64)}}};export{I as default};
