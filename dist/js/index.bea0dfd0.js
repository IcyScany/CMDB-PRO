import{s as e,_ as t}from"./subPage.2201bfd5.js";import{_ as a}from"./index.7d980246.js";import{al as o,r as i,O as s,Q as l,U as n,W as r,c as u,$ as d,R as p,F as c,S as m,a8 as _,aN as f,a3 as v,J as y,q as g,X as j,Y as x,ah as b,a6 as w,ad as C,aZ as h,v as E,aV as T}from"./index.872a2bd0.js";import{t as k}from"./tableRender.a6ff99b7.js";import{v as D}from"./vpcApi.1d083c20.js";import{o as S,_ as O,u as R}from"./opsFormInit.3a4e1794.js";import{_ as P}from"./index.029351cd.js";import"./opsDescriptions.dfa169bd.js";import"./index.87ccdcd1.js";import"./index.fc9664cf.js";import"./index.a533313d.js";import"./index.2c670fa1.js";import"./opsTable.7b07fc7b.js";import"./index.9846e408.js";import"./alertLevel.8dae0e72.js";import"./index.44a4e190.js";import"./index.65b2e021.js";import"./index.fe8e77ef.js";import"./Checkbox.ddee6d58.js";import"./index.6e2fd079.js";import"./Group.b415afa6.js";import"./RadioButton.534ff50d.js";import"./index.48209b21.js";import"./index.64f8d8d4.js";const F={__name:"edit",props:{open:{type:Boolean,default:!1},sid:{type:[String,Number],default:""},formType:{type:Number}},emits:["update:open","editSuccess"],setup(e,{emit:t}){const a=e,{open:v,sid:y,formType:g}=o(a),j=t;let x=i(null);const{putVpcEdit:b,getVpcList:w}=D;let{formRenderContent:C,formDataLoading:h,confirmLoading:E,initForm:T,formDataInit:k,editSubmit:R}=S({formRef:x,editTitleLayer:1,formType:g,sid:y,emits:j,editApi:b,oneDataApi:w,customSubmitData:async e=>e,customEditData:()=>{}});const F=()=>{j("update:open",!1)},A=async e=>{e&&(await T(),await k())};return(e,t)=>{const a=O,o=_,i=f,y=s("vxe-button"),j=P;return l(),n(j,{title:`${e.$route.meta.title}${d(g)===e.$CONFIG.FORM_TYPE.ADD_TYPE?"新增":"编辑"}`,open:d(v),onAfterOpenChange:A,onClose:F},{footer:r((()=>[u(y,{content:"取消",onClick:F}),u(y,{type:"submit",loading:d(E),status:"primary",content:"提交",onClick:d(R)},null,8,["loading","onClick"])])),default:r((()=>[u(i,{spinning:d(h)},{default:r((()=>[u(o,{ref_key:"formRef",ref:x,model:d(C).formState,rules:d(C).rules},{default:r((()=>[(l(!0),p(c,null,m(e.$utils.filter(d(C).title,(e=>e.edit_display)),(e=>{var t,o;return l(),n(a,{key:e.field,value:d(C).formState[e.field],"onUpdate:value":t=>d(C).formState[e.field]=t,title:e,"title-data":null==(o=null==(t=d(C))?void 0:t.title_data)?void 0:o[e.field]},null,8,["value","onUpdate:value","title","title-data"])})),128))])),_:1},8,["model","rules"])])),_:1},8,["spinning"])])),_:1},8,["title","open"])}}},A=["onClick"],L=["onClick"],$={style:{display:"flex","align-items":"center"}},I=v({__name:"index",setup(o){const n=i([]),m=i([]),_=i({}),f=i([]);y((async()=>{let{button:e,columns:t,title_data:a,sub_page_columns:o}=await k.setColumn({layer:1});n.value=t.value||[],m.value=e.value||[],_.value=a.value||{},f.value=o||[]}));const v=g((()=>{for(let e of n.value){let{field:t}=e;switch(t){case"region_id":case"id":case"name":case"vpc_status":e.slots={default:t}}}return n.value}));let S=g((()=>{let e={};if(m.value)for(let t of m.value){let{field:a}=t;if("edit"===a)e[a]=t}return e}));const{userEdit:O,formOpen:P,formType:I,formSid:N}=R(),U=({type:e,row:t})=>{O({type:e,sid:t.id})},Y=i(null),q=async()=>{var e;Y.value&&await(null==(e=Y.value)?void 0:e.commitRequest())},{subPageOpen:G,subPageRow:V,handleSubPageOpen:z}=e();return(e,o)=>{var i,n;const m=h,y=E,g=T,k=s("vxe-tag"),R=a,B=t;return l(),p(c,null,[u(R,{ref_key:"vpcSubnetTable",ref:Y,columns:d(v),"auth-btn":d(S),"request-config":{api:d(D).getVpcList,immediate:!0},"show-env-search":{app_name:"cloud_vpc"},"is-show-sync":{show:!0,uri:"cloud-vpc"},onUserEdit:U,onUserAdd:o[0]||(o[0]=t=>{d(O)({type:e.$CONFIG.FORM_TYPE.ADD_TYPE})})},{region_id:r((({row:e})=>{var t,a;return[j("span",null,x((null==(a=null==(t=d(_))?void 0:t.region_id)?void 0:a[e.region_id])||e.region_id),1)]})),id:r((({row:e})=>[u(y,{placement:"topLeft"},{title:r((()=>[u(m,{copyable:{tooltip:!1},class:"copy-text"},{default:r((()=>[b(x(e.vpc_id),1)])),_:2},1024)])),default:r((()=>[j("span",{class:"cursor-pointer text-primary",onClick:t=>d(z)(e)},x(e.id),9,A)])),_:2},1024)])),name:r((({row:e})=>[j("span",{class:"cursor-pointer text-primary",onClick:t=>d(z)(e)},x(e.name),9,L)])),cloud_master_account_id:r((({row:e})=>{var t,a,o;return[j("div",$,[u(g,{type:e.cloud_source},null,8,["type"])]),b(" "+x((null==(o=null==(a=null==(t=d(_))?void 0:t.cloud_master_account_id)?void 0:a[e.cloud_master_account_id])?void 0:o.page_display)||""),1)]})),vpc_status:r((({row:e})=>[u(k,{class:w("可用"===e.vpc_status?"theme--primary":"theme--error"),size:"small"},{default:r((()=>[b(x(e.vpc_status),1)])),_:2},1032,["class"])])),_:1},8,["columns","auth-btn","request-config"]),u(F,{open:d(P),"onUpdate:open":o[1]||(o[1]=e=>C(P)?P.value=e:null),sid:d(N),"form-type":d(I),onEditSuccess:q},null,8,["open","sid","form-type"]),u(B,{open:d(G),"onUpdate:open":o[2]||(o[2]=e=>C(G)?G.value=e:null),title:null==(i=d(V))?void 0:i.name,"basic-config":{columns:d(f),api:d(D).getVpcList,sid:null==(n=d(V))?void 0:n.id},onClickEdit:o[3]||(o[3]=t=>U({type:e.$CONFIG.FORM_TYPE.EDIT_TYPE,row:d(V)}))},{vpc_status:r((({row:e})=>[u(k,{class:w("可用"===e.vpc_status?"theme--primary":"theme--error"),size:"small"},{default:r((()=>[b(x(e.vpc_status),1)])),_:2},1032,["class"])])),cloud_master_account_id:r((({row:e})=>{var t,a,o;return[b(x((null==(o=null==(a=null==(t=d(_))?void 0:t.cloud_master_account_id)?void 0:a[e.cloud_master_account_id])?void 0:o.page_display)||""),1)]})),_:1},8,["open","title","basic-config"])],64)}}},[["__scopeId","data-v-11dfc024"]]);export{I as default};
