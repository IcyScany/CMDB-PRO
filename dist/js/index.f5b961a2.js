import{az as t,aA as e,aB as o,h as n,m as i,aC as l,d as r,aD as a,H as s,q as c,x as f,J as u,aE as d,ap as p,u as h,t as v,aF as g,c as m,g as k,aG as x,_ as y,aH as $,p as w,i as C,l as S,aI as b,n as T,I as B,z as A,aJ as P,o as L,r as E,aK as z,P as I,aL as _}from"./index.872a2bd0.js";import{g as O,s as F}from"./scrollTo.16647b25.js";function H(e){let o;const n=function(){if(null==o){for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];o=t((t=>()=>{o=null,e(...t)})(i))}};return n.cancel=()=>{t.cancel(o),o=null},n}function N(t){return t!==window?t.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function D(t,e,o){if(void 0!==o&&e.top>t.top-o)return`${o+e.top}px`}function R(t,e,o){if(void 0!==o&&e.bottom<t.bottom+o){return`${o+(window.innerHeight-e.bottom)}px`}}const j=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"];let M=[];function U(t,n){if(!t)return;let i=M.find((e=>e.target===t));i?i.affixList.push(n):(i={target:t,affixList:[n],eventHandlers:{}},M.push(i),j.forEach((n=>{i.eventHandlers[n]=e(t,n,(()=>{i.affixList.forEach((t=>{const{lazyUpdatePosition:e}=t.exposed;e()}),!("touchstart"!==n&&"touchmove"!==n||!o)&&{passive:!0})}))})))}function W(t){const e=M.find((e=>{const o=e.affixList.some((e=>e===t));return o&&(e.affixList=e.affixList.filter((e=>e!==t))),o}));e&&0===e.affixList.length&&(M=M.filter((t=>t!==e)),j.forEach((t=>{const o=e.eventHandlers[t];o&&o.remove&&o.remove()})))}const X=t=>{const{componentCls:e}=t;return{[e]:{position:"fixed",zIndex:t.zIndexPopup}}},q=n("Affix",(t=>{const e=i(t,{zIndexPopup:t.zIndexBase+10});return[X(e)]}));function G(){return"undefined"!=typeof window?window:null}var J,K;(K=J||(J={}))[K.None=0]="None",K[K.Prepare=1]="Prepare";const Y=l(r({compatConfig:{MODE:3},name:"AAffix",inheritAttrs:!1,props:{offsetTop:Number,offsetBottom:Number,target:{type:Function,default:G},prefixCls:String,onChange:Function,onTestUpdatePosition:Function},setup(t,e){let{slots:o,emit:n,expose:i,attrs:l}=e;const r=a(),w=a(),C=s({affixStyle:void 0,placeholderStyle:void 0,status:J.None,lastAffix:!1,prevTarget:null,timeout:null}),S=$(),b=c((()=>void 0===t.offsetBottom&&void 0===t.offsetTop?0:t.offsetTop)),T=c((()=>t.offsetBottom)),B=()=>{y(C,{status:J.Prepare,affixStyle:void 0,placeholderStyle:void 0})},A=H((()=>{B()})),P=H((()=>{const{target:e}=t,{affixStyle:o}=C;if(e&&o){const t=e();if(t&&r.value){const e=N(t),n=N(r.value),i=D(n,e,b.value),l=R(n,e,T.value);if(void 0!==i&&o.top===i||void 0!==l&&o.bottom===l)return}}B()}));i({updatePosition:A,lazyUpdatePosition:P}),f((()=>t.target),(t=>{const e=(null==t?void 0:t())||null;C.prevTarget!==e&&(W(S),e&&(U(e,S),A()),C.prevTarget=e)})),f((()=>[t.offsetTop,t.offsetBottom]),A),u((()=>{const{target:e}=t;e&&(C.timeout=setTimeout((()=>{U(e(),S),A()})))})),d((()=>{(()=>{const{status:e,lastAffix:o}=C,{target:i}=t;if(e!==J.Prepare||!w.value||!r.value||!i)return;const l=i();if(!l)return;const a={status:J.None},s=N(r.value);if(0===s.top&&0===s.left&&0===s.width&&0===s.height)return;const c=N(l),f=D(s,c,b.value),u=R(s,c,T.value);if(0!==s.top||0!==s.left||0!==s.width||0!==s.height){if(void 0!==f){const t=`${s.width}px`,e=`${s.height}px`;a.affixStyle={position:"fixed",top:f,width:t,height:e},a.placeholderStyle={width:t,height:e}}else if(void 0!==u){const t=`${s.width}px`,e=`${s.height}px`;a.affixStyle={position:"fixed",bottom:u,width:t,height:e},a.placeholderStyle={width:t,height:e}}a.lastAffix=!!a.affixStyle,o!==a.lastAffix&&n("change",a.lastAffix),y(C,a)}})()})),p((()=>{clearTimeout(C.timeout),W(S),A.cancel(),P.cancel()}));const{prefixCls:L}=h("affix",t),[E,z]=q(L);return()=>{var e;const{affixStyle:n,placeholderStyle:i,status:a}=C,s=v({[L.value]:n,[z.value]:!0}),c=g(t,["prefixCls","offsetTop","offsetBottom","target","onChange","onTestUpdatePosition"]);return E(m(x,{onResize:A},{default:()=>[m("div",k(k(k({},c),l),{},{ref:r,"data-measure-status":a}),[n&&m("div",{style:i,"aria-hidden":"true"},null),m("div",{class:s,ref:w,style:n},[null===(e=o.default)||void 0===e?void 0:e.call(o)])])]}))}}}));function Q(){}const V=Symbol("anchorContextKey"),Z=t=>{w(V,t)},tt=t=>{const{componentCls:e,holderOffsetBlock:o,motionDurationSlow:n,lineWidthBold:i,colorPrimary:l,lineType:r,colorSplit:a}=t;return{[`${e}-wrapper`]:{marginBlockStart:-o,paddingBlockStart:o,backgroundColor:"transparent",[e]:y(y({},S(t)),{position:"relative",paddingInlineStart:i,[`${e}-link`]:{paddingBlock:t.anchorPaddingBlock,paddingInline:`${t.anchorPaddingInline}px 0`,"&-title":y(y({},b),{position:"relative",display:"block",marginBlockEnd:t.anchorTitleBlock,color:t.colorText,transition:`all ${t.motionDurationSlow}`,"&:only-child":{marginBlockEnd:0}}),[`&-active > ${e}-link-title`]:{color:t.colorPrimary},[`${e}-link`]:{paddingBlock:t.anchorPaddingBlockSecondary}}}),[`&:not(${e}-wrapper-horizontal)`]:{[e]:{"&::before":{position:"absolute",left:{_skip_check_:!0,value:0},top:0,height:"100%",borderInlineStart:`${i}px ${r} ${a}`,content:'" "'},[`${e}-ink`]:{position:"absolute",left:{_skip_check_:!0,value:0},display:"none",transform:"translateY(-50%)",transition:`top ${n} ease-in-out`,width:i,backgroundColor:l,[`&${e}-ink-visible`]:{display:"inline-block"}}}},[`${e}-fixed ${e}-ink ${e}-ink`]:{display:"none"}}}},et=t=>{const{componentCls:e,motionDurationSlow:o,lineWidthBold:n,colorPrimary:i}=t;return{[`${e}-wrapper-horizontal`]:{position:"relative","&::before":{position:"absolute",left:{_skip_check_:!0,value:0},right:{_skip_check_:!0,value:0},bottom:0,borderBottom:`1px ${t.lineType} ${t.colorSplit}`,content:'" "'},[e]:{overflowX:"scroll",position:"relative",display:"flex",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},[`${e}-link:first-of-type`]:{paddingInline:0},[`${e}-ink`]:{position:"absolute",bottom:0,transition:`left ${o} ease-in-out, width ${o} ease-in-out`,height:n,backgroundColor:i}}}}},ot=n("Anchor",(t=>{const{fontSize:e,fontSizeLG:o,padding:n,paddingXXS:l}=t,r=i(t,{holderOffsetBlock:l,anchorPaddingBlock:l,anchorPaddingBlockSecondary:l/2,anchorPaddingInline:n,anchorTitleBlock:e/14*3,anchorBallSize:o/2});return[tt(r),et(r)]})),nt=r({compatConfig:{MODE:3},name:"AAnchorLink",inheritAttrs:!1,props:T({prefixCls:String,href:String,title:P(),target:String,customTitleProps:L()},{href:"#"}),slots:Object,setup(t,e){let{slots:o,attrs:n}=e,i=null;const{handleClick:l,scrollTo:r,unregisterLink:a,registerLink:s,activeLink:d}=C(V,{registerLink:Q,unregisterLink:Q,scrollTo:Q,activeLink:c((()=>"")),handleClick:Q,direction:c((()=>"vertical"))}),{prefixCls:p}=h("anchor",t),g=e=>{const{href:o}=t;l(e,{title:i,href:o}),r(o)};return f((()=>t.href),((t,e)=>{B((()=>{a(e),s(t)}))})),u((()=>{s(t.href)})),A((()=>{a(t.href)})),()=>{var e;const{href:l,target:r,title:a=o.title,customTitleProps:s={}}=t,c=p.value;i="function"==typeof a?a(s):a;const f=d.value===l,u=v(`${c}-link`,{[`${c}-link-active`]:f},n.class),h=v(`${c}-link-title`,{[`${c}-link-title-active`]:f});return m("div",k(k({},n),{},{class:u}),[m("a",{class:h,href:l,title:"string"==typeof i?i:"",target:r,onClick:g},[o.customTitle?o.customTitle(s):i]),null===(e=o.default)||void 0===e?void 0:e.call(o)])}}});function it(){return window}function lt(t,e){if(!t.getClientRects().length)return 0;const o=t.getBoundingClientRect();return o.width||o.height?e===window?(e=t.ownerDocument.documentElement,o.top-e.clientTop):o.top-e.getBoundingClientRect().top:o.top}const rt=/#([\S ]+)$/,at=r({compatConfig:{MODE:3},name:"AAnchor",inheritAttrs:!1,props:{prefixCls:String,offsetTop:Number,bounds:Number,affix:{type:Boolean,default:!0},showInkInFixed:{type:Boolean,default:!1},getContainer:Function,wrapperClass:String,wrapperStyle:{type:Object,default:void 0},getCurrentAnchor:Function,targetOffset:Number,items:z(),direction:I.oneOf(["vertical","horizontal"]).def("vertical"),onChange:Function,onClick:Function},setup(t,o){let{emit:n,attrs:i,slots:l,expose:r}=o;const{prefixCls:a,getTargetContainer:f,direction:p}=h("anchor",t),g=c((()=>{var e;return null!==(e=t.direction)&&void 0!==e?e:"vertical"})),x=E(null),$=E(),w=s({links:[],scrollContainer:null,scrollEvent:null,animating:!1}),C=E(null),S=c((()=>{const{getContainer:e}=t;return e||(null==f?void 0:f.value)||it})),b=e=>{const{getCurrentAnchor:o}=t;C.value!==e&&(C.value="function"==typeof o?o(e):e,n("change",e))},T=e=>{const{offsetTop:o,targetOffset:n}=t;b(e);const i=rt.exec(e);if(!i)return;const l=document.getElementById(i[1]);if(!l)return;const r=S.value();let a=O(r,!0)+lt(l,r);a-=void 0!==n?n:o||0,w.animating=!0,F(a,{callback:()=>{w.animating=!1},getContainer:S.value})};r({scrollTo:T});const P=()=>{if(w.animating)return;const{offsetTop:e,bounds:o,targetOffset:n}=t,i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const o=[],n=S.value();if(w.links.forEach((i=>{const l=rt.exec(i.toString());if(!l)return;const r=document.getElementById(l[1]);if(r){const l=lt(r,n);l<t+e&&o.push({link:i,top:l})}})),o.length)return o.reduce(((t,e)=>e.top>t.top?e:t)).link;return""}(void 0!==n?n:e||0,o);b(i)};Z({registerLink:t=>{w.links.includes(t)||w.links.push(t)},unregisterLink:t=>{const e=w.links.indexOf(t);-1!==e&&w.links.splice(e,1)},activeLink:C,scrollTo:T,handleClick:(t,e)=>{n("click",t,e)},direction:g}),u((()=>{B((()=>{const t=S.value();w.scrollContainer=t,w.scrollEvent=e(w.scrollContainer,"scroll",P),P()}))})),A((()=>{w.scrollEvent&&w.scrollEvent.remove()})),d((()=>{if(w.scrollEvent){const t=S.value();w.scrollContainer!==t&&(w.scrollContainer=t,w.scrollEvent.remove(),w.scrollEvent=e(w.scrollContainer,"scroll",P),P())}(()=>{const t=$.value.querySelector(`.${a.value}-link-title-active`);if(t&&x.value){const e="horizontal"===g.value;x.value.style.top=e?"":`${t.offsetTop+t.clientHeight/2}px`,x.value.style.height=e?"":`${t.clientHeight}px`,x.value.style.left=e?`${t.offsetLeft}px`:"",x.value.style.width=e?`${t.clientWidth}px`:"",e&&_(t,{scrollMode:"if-needed",block:"nearest"})}})()}));const L=t=>Array.isArray(t)?t.map((t=>{const{children:e,key:o,href:n,target:i,class:r,style:a,title:s}=t;return m(nt,{key:o,href:n,target:i,class:r,style:a,title:s,customTitleProps:t},{default:()=>["vertical"===g.value?L(e):null],customTitle:l.customTitle})})):null,[z,I]=ot(a);return()=>{var e;const{offsetTop:o,affix:n,showInkInFixed:r}=t,s=a.value,c=v(`${s}-ink`,{[`${s}-ink-visible`]:C.value}),f=v(I.value,t.wrapperClass,`${s}-wrapper`,{[`${s}-wrapper-horizontal`]:"horizontal"===g.value,[`${s}-rtl`]:"rtl"===p.value}),u=v(s,{[`${s}-fixed`]:!n&&!r}),d=y({maxHeight:o?`calc(100vh - ${o}px)`:"100vh"},t.wrapperStyle),h=m("div",{class:f,style:d,ref:$},[m("div",{class:u},[m("span",{class:c,ref:x},null),Array.isArray(t.items)?L(t.items):null===(e=l.default)||void 0===e?void 0:e.call(l)])]);return z(n?m(Y,k(k({},i),{},{offsetTop:o,target:S.value}),{default:()=>[h]}):h)}}});at.Link=nt,at.install=function(t){return t.component(at.name,at),t.component(at.Link.name,at.Link),t};export{at as A,H as t};
