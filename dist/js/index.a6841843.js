import{h as e,m as t,_ as a,l as r,i as o,p as i,d as l,aD as n,u as s,q as u,bf as p,x as c,I as g,J as v,bg as d,c as m,aG as f,g as S,P as h,bh as x,b4 as y,bi as b}from"./index.872a2bd0.js";import{u as $}from"./useBreakpoint.e81952b0.js";import{e as z}from"./eagerComputed.bb706adf.js";import{_ as C}from"./index.fc9664cf.js";const k=e=>{const{antCls:t,componentCls:o,iconCls:i,avatarBg:l,avatarColor:n,containerSize:s,containerSizeLG:u,containerSizeSM:p,textFontSize:c,textFontSizeLG:g,textFontSizeSM:v,borderRadius:d,borderRadiusLG:m,borderRadiusSM:f,lineWidth:S,lineType:h}=e,x=(e,t,a)=>({width:e,height:e,lineHeight:e-2*S+"px",borderRadius:"50%",[`&${o}-square`]:{borderRadius:a},[`${o}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${o}-icon`]:{fontSize:t,[`> ${i}`]:{margin:0}}});return{[o]:a(a(a(a({},r(e)),{position:"relative",display:"inline-block",overflow:"hidden",color:n,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:l,border:`${S}px ${h} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),x(s,c,d)),{"&-lg":a({},x(u,g,m)),"&-sm":a({},x(p,v,f)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},A=e=>{const{componentCls:t,groupBorderColor:a,groupOverlapping:r,groupSpace:o}=e;return{[`${t}-group`]:{display:"inline-flex",[`${t}`]:{borderColor:a},"> *:not(:first-child)":{marginInlineStart:r}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:o}}}},O=e("Avatar",(e=>{const{colorTextLightSolid:a,colorTextPlaceholder:r}=e,o=t(e,{avatarBg:r,avatarColor:a});return[k(o),A(o)]}),(e=>{const{controlHeight:t,controlHeightLG:a,controlHeightSM:r,fontSize:o,fontSizeLG:i,fontSizeXL:l,fontSizeHeading3:n,marginXS:s,marginXXS:u,colorBorderBg:p}=e;return{containerSize:t,containerSizeLG:a,containerSizeSM:r,textFontSize:Math.round((i+l)/2),textFontSizeLG:n,textFontSizeSM:o,groupSpace:u,groupOverlapping:-s,groupBorderColor:p}})),j=Symbol("AvatarContextKey"),G=l({compatConfig:{MODE:3},name:"AAvatar",inheritAttrs:!1,props:{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:()=>"default"},src:String,srcset:String,icon:h.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}},slots:Object,setup(e,t){let{slots:r,attrs:i}=t;const l=n(!0),h=n(!1),x=n(1),y=n(null),b=n(null),{prefixCls:C}=s("avatar",e),[k,A]=O(C),G=o(j,{}),L=u((()=>"default"===e.size?G.size:e.size)),M=$(),B=z((()=>{if("object"!=typeof e.size)return;const t=p.find((e=>M.value[e]));return e.size[t]})),F=()=>{if(!y.value||!b.value)return;const t=y.value.offsetWidth,a=b.value.offsetWidth;if(0!==t&&0!==a){const{gap:r=4}=e;2*r<a&&(x.value=a-2*r<t?(a-2*r)/t:1)}},H=()=>{const{loadError:t}=e;!1!==(null==t?void 0:t())&&(l.value=!1)};return c((()=>e.src),(()=>{g((()=>{l.value=!0,x.value=1}))})),c((()=>e.gap),(()=>{g((()=>{F()}))})),v((()=>{g((()=>{F(),h.value=!0}))})),()=>{var t,o;const{shape:n,src:s,alt:u,srcset:p,draggable:c,crossOrigin:g}=e,v=null!==(t=G.shape)&&void 0!==t?t:n,$=d(r,e,"icon"),z=C.value,O={[`${i.class}`]:!!i.class,[z]:!0,[`${z}-lg`]:"large"===L.value,[`${z}-sm`]:"small"===L.value,[`${z}-${v}`]:!0,[`${z}-image`]:s&&l.value,[`${z}-icon`]:$,[A.value]:!0},j="number"==typeof L.value?{width:`${L.value}px`,height:`${L.value}px`,lineHeight:`${L.value}px`,fontSize:$?L.value/2+"px":"18px"}:{},M=null===(o=r.default)||void 0===o?void 0:o.call(r);let P;if(s&&l.value)P=m("img",{draggable:c,src:s,srcset:p,onError:H,alt:u,crossorigin:g},null);else if($)P=$;else if(h.value||1!==x.value){const e=`scale(${x.value}) translateX(-50%)`,t={msTransform:e,WebkitTransform:e,transform:e},r="number"==typeof L.value?{lineHeight:`${L.value}px`}:{};P=m(f,{onResize:F},{default:()=>[m("span",{class:`${z}-string`,ref:y,style:a(a({},r),t)},[M])]})}else P=m("span",{class:`${z}-string`,ref:y,style:{opacity:0}},[M]);return k(m("span",S(S({},i),{},{ref:b,class:O,style:[j,(w=!!$,B.value?{width:`${B.value}px`,height:`${B.value}px`,lineHeight:`${B.value}px`,fontSize:(w?B.value/2:18)+"px"}:{}),i.style]}),[P]));var w}}}),L=l({compatConfig:{MODE:3},name:"AAvatarGroup",inheritAttrs:!1,props:{prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"},shape:{type:String,default:"circle"}},setup(e,t){let{slots:a,attrs:r}=t;const{prefixCls:o,direction:l}=s("avatar",e),n=u((()=>`${o.value}-group`)),[p,c]=O(o);return x((()=>{(e=>{i(j,e)})({size:e.size,shape:e.shape})})),()=>{const{maxPopoverPlacement:t="top",maxCount:o,maxStyle:i,maxPopoverTrigger:s="hover",shape:u}=e,g={[n.value]:!0,[`${n.value}-rtl`]:"rtl"===l.value,[`${r.class}`]:!!r.class,[c.value]:!0},v=d(a,e),f=y(v).map(((e,t)=>b(e,{key:`avatar-key-${t}`}))),h=f.length;if(o&&o<h){const e=f.slice(0,o),a=f.slice(o,h);return e.push(m(C,{key:"avatar-popover-key",content:a,trigger:s,placement:t,overlayClassName:`${n.value}-popover`},{default:()=>[m(G,{style:i,shape:u},{default:()=>["+"+(h-o)]})]})),p(m("div",S(S({},r),{},{class:g,style:r.style}),[e]))}return p(m("div",S(S({},r),{},{class:g,style:r.style}),[f]))}}});G.Group=L,G.install=function(e){return e.component(G.name,G),e.component(L.name,L),e};export{G as A};
