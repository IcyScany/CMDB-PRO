import{a3 as a,r as s,J as e,q as l,O as t,$ as u,Q as r,R as n,X as c,F as o,S as i,am as v,Y as m,c as d,Z as y,W as f,ah as p,a6 as b,U as h,ao as k,ak as x,a9 as _,aa as w}from"./index.872a2bd0.js";import{f as g}from"./feishuToJira.c0a6bcc9.js";const j=a=>(_("data-v-bd2521b4"),a=a(),w(),a),O={key:0},S={key:0,class:"overview-container"},z={class:"summary-box"},A={class:"summary-data"},J={class:"summary-title"},q={key:0,class:"summary-icon text-center"},E=j((()=>c("div",{class:"summary-border"},null,-1))),F={key:0,class:"approval-table-card"},I={class:"border-collapse border custom-table custom-table-bordered"},Q=j((()=>c("th",null,null,-1))),R={class:"text-center"},T=j((()=>c("div",{class:"summary-border"},null,-1))),U=a({__name:"index",setup(a){let{getOverview:_}=g;const w=s({});e((async()=>{try{let a=await _();w.value=a||{}}catch(a){}}));const j={0:"#e88250",1:"#3c79bf",2:"#4fb050"},U=l((()=>w.value.section1||[])),W=l((()=>U.value.filter(((a,s)=>1!==s)))),X=l((()=>U.value[1]));const Y=l((()=>{var a;return function(a){if(!a)return{names:[],statuses:[],map:{}};const s=Array.from(new Set(a.map((a=>a.feishu_approval_name)))),e=Array.from(new Set(a.map((a=>a.feishu_status)))),l={};return a.forEach((a=>{l[a.feishu_status]||(l[a.feishu_status]={}),l[a.feishu_status][a.feishu_approval_name]=a.count})),{names:s,statuses:e,map:l}}(null==(a=X.value)?void 0:a.items)})),Z=l((()=>{var a,s,e;return(null==(e=null==(s=null==(a=U.value[0])?void 0:a.items)?void 0:s[0])?void 0:e.count)??0}));return(a,s)=>{const e=k,l=t("vxe-tag"),_=x;return Object.keys(u(w)).length>0?(r(),n("div",O,[Z.value>0?(r(),n("div",S,[c("div",z,[(r(!0),n(o,null,i(W.value,((a,s)=>(r(),n("div",{key:s,class:"summary-item",style:v({"--summary-color":j[s]})},[(r(!0),n(o,null,i(a.items,((l,t)=>(r(),n("div",{key:t,class:"w-full"},[(r(!0),n(o,null,i(a.fields,(a=>(r(),n("div",{key:a,class:"w-full flex justify-around"},[c("div",A,[c("div",{class:"summary-value",style:v([{"font-size":"26px"},{color:"同步成功"===(null==l?void 0:l[a])?"var(--success-color)":"var(--warning-color)"}])},m(l.count),5),c("div",J,m((null==l?void 0:l[a])||"未知"),1)]),0===s?(r(),n("div",q,[d(e,{iconname:"icon-feishu",class:"text-[37px]"})])):y("",!0),E])))),128))])))),128))],4)))),128))]),X.value?(r(),n("div",F,[c("table",I,[c("thead",null,[c("tr",null,[Q,(r(!0),n(o,null,i(Y.value.names,(a=>(r(),n("th",{key:a,class:"text-center"},m(a),1)))),128))])]),c("tbody",null,[(r(!0),n(o,null,i(Y.value.statuses,(a=>(r(),n("tr",{key:a},[c("td",R,[d(l,{class:b(["通过"==a?"theme--success":"theme--warning","m-1"]),size:"small"},{default:f((()=>[p(m(a),1)])),_:2},1032,["class"])]),(r(!0),n(o,null,i(Y.value.names,(s=>{var e;return r(),n("td",{key:s,class:"text-center"},m((null==(e=Y.value.map[a])?void 0:e[s])||0),1)})),128))])))),128))])]),T])):y("",!0)])):(r(),h(_,{key:1}))])):(r(),h(_,{key:1}))}}},[["__scopeId","data-v-bd2521b4"]]);export{U as default};
