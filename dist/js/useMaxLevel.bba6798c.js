import{_ as e,a as t,dj as n,aF as o,r,aD as d,bh as l}from"./index.872a2bd0.js";function a(e,t){if(!e)return[];const n=e.slice(),o=n.indexOf(t);return o>=0&&n.splice(o,1),n}function i(e,t){const n=(e||[]).slice();return-1===n.indexOf(t)&&n.push(t),n}function s(e){return e.split("-")}function c(e,t){return`${e}-${t}`}function h(e,t){const n=[];return function e(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>{let{key:o,children:r}=t;n.push(o),e(r)}))}(t[e].children),n}function f(e){if(e.parent){const t=s(e.pos);return Number(t[t.length-1])===e.parent.children.length-1}return!1}function p(e,t,n,o,r,d,l,a,i,c){var h;const{clientX:p,clientY:u}=e,{top:y,height:k}=e.target.getBoundingClientRect(),v=(("rtl"===c?-1:1)*(((null==r?void 0:r.x)||0)-p)-12)/o;let g=a[n.eventKey];if(u<y+k/2){const e=l.findIndex((e=>e.key===g.key)),t=l[e<=0?0:e-1].key;g=a[t]}const b=g.key,K=g,O=g.key;let S=0,m=0;if(!i.has(b))for(let s=0;s<v&&f(g);s+=1)g=g.parent,m+=1;const w=t.eventData,x=g.node;let N=!0;return function(e){const t=s(e.pos);return 0===Number(t[t.length-1])}(g)&&0===g.level&&u<y+k/2&&d({dragNode:w,dropNode:x,dropPosition:-1})&&g.key===n.eventKey?S=-1:(K.children||[]).length&&i.has(O)?d({dragNode:w,dropNode:x,dropPosition:0})?S=0:N=!1:0===m?v>-1.5?d({dragNode:w,dropNode:x,dropPosition:1})?S=1:N=!1:d({dragNode:w,dropNode:x,dropPosition:0})?S=0:d({dragNode:w,dropNode:x,dropPosition:1})?S=1:N=!1:d({dragNode:w,dropNode:x,dropPosition:1})?S=1:N=!1,{dropPosition:S,dropLevelOffset:m,dropTargetKey:g.key,dropTargetPos:g.pos,dragOverNodeKey:O,dropContainerKey:0===S?null:(null===(h=g.parent)||void 0===h?void 0:h.key)||null,dropAllowed:N}}function u(e,t){if(!e)return;const{multiple:n}=t;return n?e.slice():e.length?[e[0]]:e}function y(e){if(!e)return null;let t;if(Array.isArray(e))t={checkedKeys:e,halfCheckedKeys:void 0};else{if("object"!=typeof e)return null;t={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0}}return t}function k(e,t){const n=new Set;function o(e){if(n.has(e))return;const r=t[e];if(!r)return;n.add(e);const{parent:d,node:l}=r;l.disabled||d&&o(d.key)}return(e||[]).forEach((e=>{o(e)})),[...n]}globalThis&&globalThis.__rest;var v=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};function g(e,t){return null!=e?e:t}function b(e){const{title:t,_title:n,key:o,children:r}=e||{},d=t||"title";return{title:d,_title:n||[d],key:o||"key",children:r||"children"}}function K(o){return function o(){return t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((t=>{var r,d,l,a;if(!function(e){return e&&e.type&&e.type.isTreeNode}(t))return null;const i=t.children||{},s=t.key,c={};for(const[e,o]of Object.entries(t.props))c[n(e)]=o;const{isLeaf:h,checkable:f,selectable:p,disabled:u,disableCheckbox:y}=c,k={isLeaf:h||""===h||void 0,checkable:f||""===f||void 0,selectable:p||""===p||void 0,disabled:u||""===u||void 0,disableCheckbox:y||""===y||void 0},g=e(e({},c),k),{title:b=(null===(r=i.title)||void 0===r?void 0:r.call(i,g)),icon:K=(null===(d=i.icon)||void 0===d?void 0:d.call(i,g)),switcherIcon:O=(null===(l=i.switcherIcon)||void 0===l?void 0:l.call(i,g))}=c,S=v(c,["title","icon","switcherIcon"]),m=null===(a=i.default)||void 0===a?void 0:a.call(i),w=e(e(e({},S),{title:b,icon:K,switcherIcon:O,key:s,isLeaf:h}),k),x=o(m);return x.length&&(w.children=x),w}))}(o)}function O(t,n,r){const{_title:d,key:l,children:a}=b(r),i=new Set(!0===n?[]:n),s=[];return function t(r){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.map(((f,p)=>{const u=c(h?h.pos:"0",p),y=g(f[l],u);let k;for(let e=0;e<d.length;e+=1){const t=d[e];if(void 0!==f[t]){k=f[t];break}}const v=e(e({},o(f,[...d,l,a])),{title:k,key:y,parent:h,pos:u,children:null,data:f,isStart:[...h?h.isStart:[],0===p],isEnd:[...h?h.isEnd:[],p===r.length-1]});return s.push(v),!0===n||i.has(y)?v.children=t(f[a]||[],v):v.children=[],v}))}(t),s}function S(e){let{initWrapper:t,processEntity:n,onProcessFinished:o,externalGetKey:r,childrenPropName:d,fieldNames:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=r||(arguments.length>2?arguments[2]:void 0),i={},s={};let h={posEntities:i,keyEntities:s};return t&&(h=t(h)||h),function(e,t,n){let o={};o="object"==typeof n?n:{externalGetKey:n},o=o||{};const{childrenPropName:r,externalGetKey:d,fieldNames:l}=o,{key:a,children:i}=b(l),s=r||i;let h;d?"string"==typeof d?h=e=>e[d]:"function"==typeof d&&(h=e=>d(e)):h=(e,t)=>g(e[a],t),function n(o,r,d,l){const a=o?o[s]:e,i=o?c(d.pos,r):"0",f=o?[...l,o]:[];if(o){const e=h(o,i),n={node:o,index:r,pos:i,key:e,parentPos:d.node?d.pos:null,level:d.level+1,nodes:f};t(n)}a&&a.forEach(((e,t)=>{n(e,t,{node:o,pos:i,level:d?d.level+1:-1},f)}))}(null)}(e,(e=>{const{node:t,index:o,pos:r,key:d,parentPos:l,level:a,nodes:c}=e,f={node:t,nodes:c,index:o,key:d,pos:r,level:a},p=g(d,r);i[r]=f,s[p]=f,f.parent=i[l],f.parent&&(f.parent.children=f.parent.children||[],f.parent.children.push(f)),n&&n(f,h)}),{externalGetKey:a,childrenPropName:d,fieldNames:l}),o&&o(h),h}function m(e,t){let{expandedKeysSet:n,selectedKeysSet:o,loadedKeysSet:r,loadingKeysSet:d,checkedKeysSet:l,halfCheckedKeysSet:a,dragOverNodeKey:i,dropPosition:s,keyEntities:c}=t;const h=c[e];return{eventKey:e,expanded:n.has(e),selected:o.has(e),loaded:r.has(e),loading:d.has(e),checked:l.has(e),halfChecked:a.has(e),pos:String(h?h.pos:""),parent:h.parent,dragOver:i===e&&0===s,dragOverGapTop:i===e&&-1===s,dragOverGapBottom:i===e&&1===s}}function w(t){const{data:n,expanded:o,selected:r,checked:d,loaded:l,loading:a,halfChecked:i,dragOver:s,dragOverGapTop:c,dragOverGapBottom:h,pos:f,active:p,eventKey:u}=t,y=e(e({dataRef:n},n),{expanded:o,selected:r,checked:d,loaded:l,loading:a,halfChecked:i,dragOver:s,dragOverGapTop:c,dragOverGapBottom:h,pos:f,active:p,eventKey:u,key:u});return"props"in y||Object.defineProperty(y,"props",{get:()=>t}),y}function x(e,t){const n=new Set;return e.forEach((e=>{t.has(e)||n.add(e)})),n}function N(e){const{disabled:t,disableCheckbox:n,checkable:o}=e||{};return!(!t&&!n)||!1===o}function E(e,t,n,o,r,d){let l;l=d||N;const a=new Set(e.filter((e=>!!n[e])));let i;return i=!0===t?function(e,t,n,o){const r=new Set(e),d=new Set;for(let a=0;a<=n;a+=1)(t.get(a)||new Set).forEach((e=>{const{key:t,node:n,children:d=[]}=e;r.has(t)&&!o(n)&&d.filter((e=>!o(e.node))).forEach((e=>{r.add(e.key)}))}));const l=new Set;for(let a=n;a>=0;a-=1)(t.get(a)||new Set).forEach((e=>{const{parent:t,node:n}=e;if(o(n)||!e.parent||l.has(e.parent.key))return;if(o(e.parent.node))return void l.add(t.key);let a=!0,i=!1;(t.children||[]).filter((e=>!o(e.node))).forEach((e=>{let{key:t}=e;const n=r.has(t);a&&!n&&(a=!1),i||!n&&!d.has(t)||(i=!0)})),a&&r.add(t.key),i&&d.add(t.key),l.add(t.key)}));return{checkedKeys:Array.from(r),halfCheckedKeys:Array.from(x(d,r))}}(a,r,o,l):function(e,t,n,o,r){const d=new Set(e);let l=new Set(t);for(let i=0;i<=o;i+=1)(n.get(i)||new Set).forEach((e=>{const{key:t,node:n,children:o=[]}=e;d.has(t)||l.has(t)||r(n)||o.filter((e=>!r(e.node))).forEach((e=>{d.delete(e.key)}))}));l=new Set;const a=new Set;for(let i=o;i>=0;i-=1)(n.get(i)||new Set).forEach((e=>{const{parent:t,node:n}=e;if(r(n)||!e.parent||a.has(e.parent.key))return;if(r(e.parent.node))return void a.add(t.key);let o=!0,i=!1;(t.children||[]).filter((e=>!r(e.node))).forEach((e=>{let{key:t}=e;const n=d.has(t);o&&!n&&(o=!1),i||!n&&!l.has(t)||(i=!0)})),o||d.delete(t.key),i&&l.add(t.key),a.add(t.key)}));return{checkedKeys:Array.from(d),halfCheckedKeys:Array.from(x(l,d))}}(a,t.halfCheckedKeys,r,o,l),i}function P(e){const t=r(0),n=d();return l((()=>{const o=new Map;let r=0;const d=e.value||{};for(const e in d)if(Object.prototype.hasOwnProperty.call(d,e)){const t=d[e],{level:n}=t;let l=o.get(n);l||(l=new Set,o.set(n,l)),l.add(t),r=Math.max(r,n)}t.value=r,n.value=o})),{maxLevel:t,levelEntities:n}}export{S as a,E as b,w as c,a as d,i as e,g as f,m as g,K as h,b as i,k as j,O as k,u as l,h as m,p as n,s as o,y as p,P as u};
