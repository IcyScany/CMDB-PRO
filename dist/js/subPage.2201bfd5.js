import{_ as a}from"./index.029351cd.js";import{a as e}from"./opsDescriptions.dfa169bd.js";import{a3 as t,al as s,cj as o,H as i,q as n,O as c,Q as l,U as u,W as d,c as p,$ as y,ag as r,R as b,F as m,S as v,an as f,aU as g,aY as k,a_ as _,a$ as h,aN as j,r as D}from"./index.872a2bd0.js";const $="basic",w=t({__name:"index",props:{open:{type:Boolean,default:!1},title:{type:String,default:""},basicConfig:{type:Object,default:()=>({show:!0,columns:[],api:()=>{},sid:0,customParams:null})},customTabs:{type:Array,default:()=>[]},showEdit:{type:Boolean,default:!0},commonObjType:{type:String,default:""}},emits:["update:open","update:activeTab","clickEdit","getSubPageData"],setup(t,{expose:D,emit:w}){const T=t,{open:K}=s(T),O=w,x=o(),C=Object.keys(x),P=i({basicData:{},activeKey:$,loading:!1}),S=n((()=>Object.assign({key:$,title:"基础信息",show:!0},T.basicConfig))),E=n((()=>S.value.show?[S.value,...T.customTabs]:T.customTabs)),U=async()=>{P.activeKey=E.value[0].key,O("update:activeTab",P.activeKey);const{api:a,sid:e,customParams:t}=S.value;if(K.value&&a){P.loading=!0;try{P.basicData=t?await a(t):await a(e)}catch(s){}O("getSubPageData",P.basicData),P.loading=!1}},q=()=>{O("update:open",!1),P.basicData={}},A=a=>{P.activeKey=a,O("update:activeTab",a)};return D({handleTabChange:A}),(s,o)=>{const i=e,n=k,D=_,w=h,T=c("vxe-button"),x=j,S=a;return l(),u(S,g(s.$attrs,{open:y(K),title:t.title,onClose:q,onAfterOpenChange:U}),{default:d((()=>[p(x,{spinning:y(P).loading},r({default:d((()=>[p(w,{activeKey:y(P).activeKey,"onUpdate:activeKey":o[0]||(o[0]=a=>y(P).activeKey=a),onChange:A},{default:d((()=>[(l(!0),b(m,null,v(y(E),(a=>(l(),u(D,{key:a.key,tab:a.title},{default:d((()=>[a.isCustomTab?f(s.$slots,a.key,{key:0,data:a.data||y(P).basicData},void 0,!0):(l(),u(n,{key:1},{default:d((()=>[p(i,{data:a.data||y(P).basicData,columns:a.columns,column:a.column||1,"common-obj-type":t.commonObjType},r({_:2},[v(y(C),(e=>({name:e,fn:d((t=>[a.key===$?f(s.$slots,e,g({key:0,ref_for:!0},t),void 0,!0):f(s.$slots,`${a.key}-${e}`,g({key:1,ref_for:!0},t),void 0,!0)]))})))]),1032,["data","columns","column","common-obj-type"])])),_:2},1024)),a.key===$?f(s.$slots,"basic-extra",{key:2,row:y(P).basicData},void 0,!0):f(s.$slots,`${a.key}-extra`,{key:3,row:y(P).basicData},void 0,!0)])),_:2},1032,["tab"])))),128))])),_:3},8,["activeKey"])])),_:2},[t.showEdit?{name:"footer",fn:d((()=>[p(T,{status:"primary",content:"编辑",onClick:o[1]||(o[1]=a=>O("clickEdit"))})])),key:"0"}:void 0]),1032,["spinning"])])),_:3},16,["open","title"])}}},[["__scopeId","data-v-6a19651e"]]),T=()=>{const a=D(!1),e=D(null);return{subPageOpen:a,subPageRow:e,handleSubPageOpen:t=>{a.value=!0,e.value=t}}};export{w as _,T as s};
