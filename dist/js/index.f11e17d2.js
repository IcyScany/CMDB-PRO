import{a3 as a,H as e,J as s,Q as t,R as l,X as o,F as c,S as r,a6 as n,am as i,$ as u,Y as d,Z as v,c as y,W as m,U as p,ah as _,aV as f,v as w,aY as b,a9 as x,aa as k}from"./index.872a2bd0.js";import{c as h}from"./certManage.ef938e3f.js";import{_ as g}from"./index.fc9664cf.js";const D={class:"overview-container"},j={class:"summary-box"},E=["onClick"],$={class:"summary-title"},C=["src"],M=(a=>(x("data-v-e16a83cf"),a=a(),k(),a))((()=>o("div",{class:"summary-border"},null,-1))),O={class:"desc-box"},Y={class:"desc-title"},z={class:"desc-list"},F={class:"desc-label truncate"},H={class:"desc-value"},I={key:0},J={style:{color:"#888"}},P={key:1},Q=a({__name:"index",setup(a){const x=e({overviewData:{}}),k={total:{label:"总数",color:"#4fb050",icon:"kvstore.png",pointer:!0,name:"certificateManagementPage"},expire_days:{label:"到期天数",color:"#e88250"},status:{label:"状态",color:"#e88250"}},Q={environment:{label:"环境分布"}};return s((async()=>{await(async()=>{const a=await h.getOverview({expire_days:[10,30],group_by_fields:[["environment"],["status"]]});x.overviewData.total=[{total:"总数",count:a.count}],a.group_by.forEach((a=>{let e=a.fields[0],s=a.items.sort(((a,e)=>e.count-a.count));x.overviewData[e]=s})),x.overviewData.expire_days=a.expire_days.map((a=>({expire_days:`即将过期（小于${a.days}天）`,count:a.items.length}))),x.overviewData.status.forEach((a=>{a.status=1===a.status?"有效证书":"无效证书"}))})(),await(async()=>{let a=x.overviewData;Object.entries(a).forEach((([a,e])=>{e.forEach((e=>{e[a]||(e[a]="其他")}))}))})()})),(a,e)=>{const s=f,h=w,R=g,S=b;return t(),l("div",D,[o("div",j,[(t(),l(c,null,r(k,((e,s)=>o("div",{key:s,class:n(["summary-item",{"cursor-pointer":e.pointer}]),style:i({"--summary-color":e.color}),onClick:s=>e.pointer?a.$router.push({name:e.name}):null},[(t(!0),l(c,null,r(u(x).overviewData[s],((a,r)=>(t(),l(c,{key:r},[o("div",null,[o("div",{class:"summary-value",style:i({"font-size":"total"===s?"32px":""})},d(a.count),5),o("div",$,d(a[s]),1)]),e.icon?(t(),l("img",{key:0,class:"summary-icon",src:`/images/${e.icon}`},null,8,C)):v("",!0),M],64)))),128))],14,E))),64))]),y(S,{title:"资源分布"},{default:m((()=>[o("div",O,[(t(),l(c,null,r(Q,((a,e)=>{var i;return o("div",{key:e,class:"desc-card"},[o("div",Y,d(a.label),1),o("div",z,[(t(!0),l(c,null,r(null==(i=u(x).overviewData)?void 0:i[e],(i=>(t(),l("div",{key:i.label,class:n({"two-col":"spec_code"===e})},[y(h,{title:i[e]},{default:m((()=>[o("span",F,[!a.icon||"cloud_source"===e&&"自建"===i.cloud_source?v("",!0):(t(),p(s,{key:0,type:i.cloud_source,style:{width:"22px"}},null,8,["type"])),_(" "+d(i[e])+"： ",1)])])),_:2},1032,["title"]),o("span",H,[i.other_data?(t(),l("span",I,[y(R,{placement:"right"},{content:m((()=>[(t(!0),l(c,null,r(i.other_data,((c,r)=>(t(),l("div",{key:r},[o("span",J,[a.icon?(t(),p(s,{key:0,type:c.cloud_source,style:{width:"22px"}},null,8,["type"])):v("",!0),_(" "+d(c[e])+": ",1)]),_(" "+d(c.count),1)])))),128))])),default:m((()=>[o("span",null,d(i.count),1)])),_:2},1024)])):(t(),l("span",P,d(i.count),1))])],2)))),128))])])})),64))])])),_:1})])}}},[["__scopeId","data-v-e16a83cf"]]);export{Q as default};
