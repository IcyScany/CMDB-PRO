import{a3 as e,q as l,H as a,J as i,Q as t,R as n,S as o,U as d,W as u,Y as r,Z as s,ah as p,X as v,C as c,D as m,c as _,an as y,F as f,aR as b,aZ as g,aU as h,aW as k,aV as T,d2 as x}from"./index.872a2bd0.js";import{_ as w}from"./index.87ccdcd1.js";import{_ as j}from"./index.fc9664cf.js";import{D,_ as S}from"./index.a533313d.js";const O={key:0,class:"w-50 inline-block cn-name-render"},$={class:"name-info-popover"},F={class:"name-info-item-desc"},R={class:"value description"},A={key:0,class:"w-50 inline-block cn-name-render"},C={class:"name-info-item mb-5 mt-2"},q={key:0,class:"w-50 inline-block cn-name-render uuid"},I={class:"text-primary name-info"},U={key:0},W=e({__name:"UuidNameInfo",props:{uuid:{type:[String,Array],required:!0},objType:{type:String,required:!0}},setup(e){const h=e,k=l((()=>Array.isArray(h.uuid)?h.uuid:"string"==typeof h.uuid&&h.uuid.indexOf(",")>-1?h.uuid.split(",").map((e=>e.trim())).filter(Boolean):[h.uuid])),T=a({}),x="名称",D="描述",S="ID",W=async e=>{var l;if(!(null==(l=T[e])?void 0:l.isDataFetched)){T[e]||(T[e]={name:"",description:"",uuid:e,isDataFetched:!1});try{const l=await b.get(`/public/name-info/${h.objType}/${e}`,{noErrorTip:!0});T[e].name=(null==l?void 0:l.name)||"",T[e].description=(null==l?void 0:l.description)||"",T[e].isDataFetched=!0}catch(a){T[e].name="",T[e].description="",T[e].isDataFetched=!0}}},z=e=>{const l=T[e];return l&&l.name&&l.description&&l.uuid};return i((async()=>{await Promise.all(k.value.map((e=>W(e))))})),(e,l)=>{const a=g,i=w,b=j;return t(!0),n(f,null,o(k.value,(l=>(t(),d(b,{key:l,trigger:"hover",placement:"topLeft","overlay-class-name":"uuid-name-info-popover","overlay-inner-style":{width:"380px",padding:"10px"},onOpenChange:e=>e&&W(l)},{title:u((()=>{var e,a;return[z(l)?(t(),n("span",O,r(x)+"：",1)):s("",!0),p(" "+r((null==(e=T[l])?void 0:e.name)||(null==(a=T[l])?void 0:a.description)),1)]})),content:u((()=>{var e,o;return[v("div",$,[v("div",F,[c(v("span",R,[z(l)?(t(),n("span",A,r(D)+"：",1)):s("",!0),p(" "+r(null==(e=T[l])?void 0:e.description),1)],512),[[m,null==(o=T[l])?void 0:o.name]])]),v("div",C,[_(i,null,{default:u((()=>[z(l)?(t(),n("span",q,r(S)+"：",1)):s("",!0),_(a,{copyable:{tooltip:!1}},{default:u((()=>[p(r(l),1)])),_:2},1024)])),_:2},1024)])])]})),default:u((()=>[v("span",I,[y(e.$slots,"default",{},(()=>{var e,a;return[p(r((null==(e=T[l])?void 0:e.name)||(null==(a=T[l])?void 0:a.description)||l)+" ",1),l!==k.value[k.value.length-1]?(t(),n("span",U,",")):s("",!0)]}),!0)])])),_:2},1032,["onOpenChange"])))),128)}}},[["__scopeId","data-v-7b4e552b"]]),z={__name:"opsDescriptions",props:{data:{type:Object,default:()=>({})},columns:{type:Array,default:()=>[]},commonObjType:{type:String,default:""}},setup(e){const l={label:{width:"20%",marginRight:"10px",color:"#868686"},content:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginRight:"10px"},tooltip:{fontSize:"12px",maxWidth:"500px"}};return(a,i)=>{const s=k,v=T,c=x,m=W,_=D,b=S;return t(),d(b,h(a.$attrs,{"label-style":l.label,"content-style":l.content,column:1,colon:!1,size:"small"}),{default:u((()=>[(t(!0),n(f,null,o(e.columns.filter((e=>"operation"!==e.field)),((l,i)=>(t(),d(_,{key:i},{label:u((()=>[y(a.$slots,`${l.field}-label`,{label:l.title},(()=>[p(r(l.title),1)]))])),default:u((()=>[y(a.$slots,l.field,{row:e.data},(()=>{var a,i,o,u,_,y,b,g,h,k,T,x,w,j,D,S,O,$,F,R,A,C,q,I,U,W,z,H,N,V,Z,B,E,J;return[((null==(i=null==(a=null==l?void 0:l.oriTitle)?void 0:a.page_data_source)?void 0:i.template_render)||(null==(u=null==(o=null==l?void 0:l.oriTitle)?void 0:o.page_data_source)?void 0:u.sub_template_render))&&(null==(_=e.data[l.field])?void 0:_.toString())?(t(),n(f,{key:0},["opsVirtualTeam"===(null==(g=null==(b=null==(y=null==l?void 0:l.oriTitle)?void 0:y.page_data_source)?void 0:b.template_render)?void 0:g.name)?(t(),d(s,{key:0,"field-value":e.data[l.field],"data-source":(null==(h=l.title_data)?void 0:h.virtual_team_v3_id)||(null==(k=l.title_data)?void 0:k.virtual_teams),hyphen:!1},null,8,["field-value","data-source"])):"myCloud"===(null==(w=null==(x=null==(T=null==l?void 0:l.oriTitle)?void 0:T.page_data_source)?void 0:x.template_render)?void 0:w.name)?(t(),d(v,{key:1,style:{width:"none"},type:e.data[l.field]},null,8,["type"])):"opsStatus"===(null==(S=null==(D=null==(j=null==l?void 0:l.oriTitle)?void 0:j.page_data_source)?void 0:D.template_render)?void 0:S.name)?(t(),d(c,{key:2,value:e.data[l.field],"active-value":null==(F=null==($=null==(O=null==l?void 0:l.oriTitle)?void 0:O.page_data_source)?void 0:$.template_render)?void 0:F.active_value,"transform-rule":null==(C=null==(A=null==(R=null==l?void 0:l.oriTitle)?void 0:R.page_data_source)?void 0:A.template_render)?void 0:C.transform_rule},null,8,["value","active-value","transform-rule"])):"uuidNameRender"===(null==(U=null==(I=null==(q=null==l?void 0:l.oriTitle)?void 0:q.page_data_source)?void 0:I.sub_template_render)?void 0:U.name)?(t(),d(m,{key:3,"obj-type":e.commonObjType||(null==(H=null==(z=null==(W=null==l?void 0:l.oriTitle)?void 0:W.page_data_source)?void 0:z.sub_template_render)?void 0:H.obj_type),uuid:(null==(Z=null==(V=null==(N=null==l?void 0:l.oriTitle)?void 0:N.page_data_source)?void 0:V.sub_template_render)?void 0:Z.uuid_field)?e.data[null==(J=null==(E=null==(B=null==l?void 0:l.oriTitle)?void 0:B.page_data_source)?void 0:E.sub_template_render)?void 0:J.uuid_field]:e.data[l.field]},null,8,["obj-type","uuid"])):(t(),n(f,{key:4},[p(r(e.data[l.field]),1)],64))],64)):(t(),n(f,{key:1},[p(r(e.data[l.field]),1)],64))]}))])),_:2},1024)))),128))])),_:3},16,["label-style","content-style"])}}};export{W as _,z as a};
