import{a3 as a,H as e,J as s,Q as t,R as l,X as o,F as c,S as n,a6 as r,am as i,$ as u,Y as d,Z as v,c as m,W as p,U as y,ah as _,aV as b,v as x,aY as w,a9 as f,aa as k}from"./index.872a2bd0.js";import{A as h}from"./expireRemind.7c97f83a.js";import{_ as g}from"./index.fc9664cf.js";const D={class:"overview-container"},j={class:"summary-box"},$=["onClick"],E={class:"summary-title"},R=["src"],C=(a=>(f("data-v-b75c66dc"),a=a(),k(),a))((()=>o("div",{class:"summary-border"},null,-1))),O={class:"desc-box"},Y={class:"desc-title"},z={class:"desc-list"},A={class:"desc-label truncate"},F={class:"desc-value"},H={key:0},I={style:{color:"#888"}},J={key:1},P=a({__name:"index",setup(a){const f=e({overviewData:{}}),k={total:{label:"总数",color:"#4fb050",icon:"kvstore.png",pointer:!0,name:"expireRemindPage"},expire_days:{label:"到期天数",color:"#e88250"},status:{label:"状态",color:"#e88250"}},P={environment:{label:"环境分布"}};return s((async()=>{await(async()=>{const a=await h.getOverview({expire_days:[10,30],group_by_fields:[["environment"],["status"]]});f.overviewData.total=[{total:"总数",count:a.count}],a.group_by.forEach((a=>{let e=a.fields[0],s=a.items.sort(((a,e)=>e.count-a.count));f.overviewData[e]=s})),f.overviewData.expire_days=a.expire_days.map((a=>({expire_days:`即将过期（小于${a.days}天）`,count:a.items.length})))})(),await(async()=>{let a=f.overviewData;Object.entries(a).forEach((([a,e])=>{e.forEach((e=>{e[a]||(e[a]="其他")}))}))})()})),(a,e)=>{const s=b,h=x,Q=g,S=w;return t(),l("div",D,[o("div",j,[(t(),l(c,null,n(k,((e,s)=>o("div",{key:s,class:r(["summary-item",{"cursor-pointer":e.pointer}]),style:i({"--summary-color":e.color}),onClick:s=>e.pointer?a.$router.push({name:e.name}):null},[(t(!0),l(c,null,n(u(f).overviewData[s],((a,n)=>(t(),l(c,{key:n},[o("div",null,[o("div",{class:"summary-value",style:i({"font-size":"total"===s?"32px":""})},d(a.count),5),o("div",E,d(a[s]),1)]),e.icon?(t(),l("img",{key:0,class:"summary-icon",src:`/images/${e.icon}`},null,8,R)):v("",!0),C],64)))),128))],14,$))),64))]),m(S,{title:"资源分布"},{default:p((()=>[o("div",O,[(t(),l(c,null,n(P,((a,e)=>{var i;return o("div",{key:e,class:"desc-card"},[o("div",Y,d(a.label),1),o("div",z,[(t(!0),l(c,null,n(null==(i=u(f).overviewData)?void 0:i[e],(i=>(t(),l("div",{key:i.label,class:r({"two-col":"spec_code"===e})},[m(h,{title:i[e]},{default:p((()=>[o("span",A,[!a.icon||"cloud_source"===e&&"自建"===i.cloud_source?v("",!0):(t(),y(s,{key:0,type:i.cloud_source,style:{width:"22px"}},null,8,["type"])),_(" "+d(i[e])+"： ",1)])])),_:2},1032,["title"]),o("span",F,[i.other_data?(t(),l("span",H,[m(Q,{placement:"right"},{content:p((()=>[(t(!0),l(c,null,n(i.other_data,((c,n)=>(t(),l("div",{key:n},[o("span",I,[a.icon?(t(),y(s,{key:0,type:c.cloud_source,style:{width:"22px"}},null,8,["type"])):v("",!0),_(" "+d(c[e])+": ",1)]),_(" "+d(c.count),1)])))),128))])),default:p((()=>[o("span",null,d(i.count),1)])),_:2},1024)])):(t(),l("span",J,d(i.count),1))])],2)))),128))])])})),64))])])),_:1})])}}},[["__scopeId","data-v-b75c66dc"]]);export{P as default};
