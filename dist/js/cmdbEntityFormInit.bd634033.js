import{aR as e,r as t,p as a}from"./index.872a2bd0.js";import{a as s,d as l}from"./opsFormInit.3a4e1794.js";import{s as o}from"./successModal.c280f18f.js";const i=({urlPrefix:i,gridOptions:d,getData:r,editUrl:c="edit",delUrl:n="del",customEdit:u,tableType:m="client",customClickStatusError:p,customClickStatusSuccess:f})=>{let g=t(!1),$=t(null),h=t(0);return a("formType",$),{userClickStatus:async({checked:t,sid:a,index:l,field:o,otherBody:n={}})=>{let u={};o&&(u[o]=t),n&&(u=Object.assign({},n,u)),d&&(d.loading=!0),e.put(`${i}${c}/${a}`,u).then((e=>{d&&(d.loading=!1),"client"===m&&d&&(d.data[l][o]=t),s({content:e.msg,closeCallback:()=>{r&&r()}}),f&&f(e)})).catch((()=>{d&&(d.loading=!1),p&&p()}))},userDel:({sid:t,delParams:a,additionNode:s,delSuccessCallback:c,customPutData:u,delOpenApiRequestConfig:m})=>{l((()=>{d&&(d.loading=!0);let s="";if(a)for(let e in a)s+=`/${a[e]}`;let l={sid:t};u&&(l=u(l));let p=`${i}${n}/${t}${s}`;(m?function(t,a="GET",s={},l,o="/api/v2/"){let i={method:a,url:`${o||""}${t}`};return"GET"!==a&&"DELETE"!==a&&(i.param=s),e.post("/api/v1",i,l)}(p,m.method?m.method:"PUT",l):e.delete(p,l)).then((e=>{d&&(d.loading=!1),o({content:e.msg}),r&&r(!0),c&&c()})).catch((()=>{d&&(d.loading=!1)}))}),s)},userEdit:({type:e,sid:t=0,data:a})=>{g.value=!0,$.value=e,h.value=t,u&&u(a)},formOpen:g,formType:$,formSid:h}};export{i as c};
