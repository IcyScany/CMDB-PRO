import{s as e,_ as t}from"./subPage.2201bfd5.js";import{_ as i}from"./ServerTable.53881589.js";import{b5 as a,al as l,r as n,O as o,Q as r,U as d,W as s,c as u,$ as p,R as c,F as _,S as m,a8 as f,aN as v,H as y,q as j,J as b,ah as g,Y as w,X as x,ad as D,aZ as C,v as T,aV as S}from"./index.872a2bd0.js";import{t as k}from"./tableRender.a6ff99b7.js";import{o as P,_ as h,u as E}from"./opsFormInit.3a4e1794.js";import{_ as O}from"./index.029351cd.js";import{A as F}from"./cloudCfw.1fb9ad9b.js";import"./opsDescriptions.dfa169bd.js";import"./index.87ccdcd1.js";import"./index.fc9664cf.js";import"./index.a533313d.js";import"./index.2c670fa1.js";import"./index.fe8e77ef.js";import"./Checkbox.ddee6d58.js";import"./index.6f715054.js";import"./useBreakpoint.e81952b0.js";import"./index.e3d002e2.js";import"./index.9846e408.js";import"./alertLevel.8dae0e72.js";import"./index.44a4e190.js";import"./index.65b2e021.js";import"./index.6e2fd079.js";import"./Group.b415afa6.js";import"./RadioButton.534ff50d.js";import"./index.48209b21.js";import"./index.64f8d8d4.js";const R={__name:"edit",props:{open:{type:Boolean,default:!1},sid:{type:[String,Number],default:""},formType:{type:Number,default:a}},emits:["update:open","editSuccess"],setup(e,{emit:t}){const i=e,{open:a,sid:y,formType:j}=l(i),b=t,g=n(null),{putEdit:w,getDetail:x,postAdd:D}=F,{formRenderContent:C,formDataLoading:T,confirmLoading:S,initForm:k,formDataInit:E,editSubmit:R}=P({formRef:g,editTitleLayer:1,formType:j,sid:y,emits:b,addApi:D,editApi:w,oneDataApi:x,customSubmitData:async function(e){return e},customEditData:function(){}});const A=()=>{b("update:open",!1)},U=async e=>{e&&(await k(),await E())};return(e,t)=>{const i=h,l=f,n=v,y=o("vxe-button"),b=O;return r(),d(b,{title:`${e.$route.meta.title}${p(j)===e.$CONFIG.FORM_TYPE.ADD_TYPE?"新增":"编辑"}`,open:p(a),onAfterOpenChange:U,onClose:A},{footer:s((()=>[u(y,{content:"取消",onClick:A}),u(y,{type:"submit",loading:p(S),status:"primary",content:"提交",onClick:p(R)},null,8,["loading","onClick"])])),default:s((()=>[u(n,{spinning:p(T)},{default:s((()=>[u(l,{ref_key:"formRef",ref:g,model:p(C).formState,rules:p(C).rules},{default:s((()=>[(r(!0),c(_,null,m(e.$utils.filter(p(C).title,(e=>e.edit_display)),(e=>{var t,a,l,n;return r(),c(_,{key:e.field},[""===e.field?(r(),d(i,{key:0,value:p(C).formState[e.field],"onUpdate:value":t=>p(C).formState[e.field]=t,title:e,"title-data":null==(a=null==(t=p(C))?void 0:t.title_data)?void 0:a[e.field]},null,8,["value","onUpdate:value","title","title-data"])):(r(),d(i,{key:1,value:p(C).formState[e.field],"onUpdate:value":t=>p(C).formState[e.field]=t,title:e,"title-data":null==(n=null==(l=p(C))?void 0:l.title_data)?void 0:n[e.field]},null,8,["value","onUpdate:value","title","title-data"]))],64)})),128))])),_:1},8,["model","rules"])])),_:1},8,["spinning"])])),_:1},8,["title","open"])}}},A=["onClick"],U={style:{display:"flex","align-items":"center"}},I={class:"truncate"},$={class:"truncate"},B=["onClick"],Y={class:"truncate"},L={__name:"index",setup(a){const l=n(null),o=y({initColumn:[],initButton:[],initTitleData:[],tableOrder:{},titleFieldSearch:[],subPageColumns:[]}),{userEdit:d,userDel:m,formOpen:f,formType:v,formSid:P}=E(),h=j((()=>{for(let e of o.initColumn){let{field:t}=e;switch(t){case"id":case"region_id":case"enterprise_project_id":e.slots={default:t}}}return o.initColumn})),O=j((()=>o.initButton.reduce(((e,t)=>(e[t.field]=t,e)),{})));b((async()=>{const{button:e,columns:t,title_data:i,order:a,title_field_search:l,sub_page_columns:n}=await k.setColumn({layer:1});o.initColumn=t.value||[],o.initButton=e.value||[],o.initTitleData=i.value||[],o.tableOrder=a.value||{},o.titleFieldSearch=l.value||[],o.subPageColumns=n||[],await L()}));const L=async()=>{l.value&&await l.value.serverTableRef.commitProxy("query")},N=({type:e,row:t})=>{d({type:e,sid:t.id})},q=({row:e})=>{m({sid:e.id,delApi:F.del,loadData:L})},{subPageOpen:G,subPageRow:M,handleSubPageOpen:H}=e(),z={fields:[{field:"public_ip",field_name:"弹性公网IP",operator:"="}],placeholder:"支持弹性公网IP搜索"};return(e,a)=>{var n,m;const y=C,j=T,b=S,k=i,E=t;return r(),c(_,null,[u(k,{ref_key:"tableRef",ref:l,"table-column":p(h),"auth-btn":p(O),order:p(o).tableOrder,"query-api":p(F).getList,"title-field-search":p(o).titleFieldSearch,"default-search-field":z,onUserEdit:N,onUserAdd:a[0]||(a[0]=t=>p(d)({type:e.$CONFIG.FORM_TYPE.ADD_TYPE})),onUserDel:q},{id:s((({row:e})=>[u(j,{placement:"topLeft"},{title:s((()=>[u(y,{copyable:{tooltip:!1},class:"tooltip-text"},{default:s((()=>[g(w(e.fw_instance_id),1)])),_:2},1024)])),default:s((()=>[x("span",{class:"cursor-pointer text-primary",onClick:t=>p(H)(e)},w(e.id),9,A)])),_:2},1024)])),cloud_master_account_id:s((({row:e})=>{var t,i,a;return[x("div",U,[u(b,{type:null==e?void 0:e.cloud_source},null,8,["type"])]),g(" "+w((null==(a=null==(i=null==(t=p(o).initTitleData)?void 0:t.cloud_master_account_id)?void 0:i[e.cloud_master_account_id])?void 0:a.page_display)||""),1)]})),region_id:s((({row:e})=>{var t,i;return[x("span",null,w((null==(i=null==(t=p(o).initTitleData)?void 0:t.region_id)?void 0:i[e.region_id])||e.region_id),1)]})),enterprise_project_id:s((({row:e})=>{var t,i;return[g(w((null==(i=null==(t=p(o).initTitleData)?void 0:t.enterprise_project_id)?void 0:i[e.enterprise_project_id])||("0"===e.enterprise_project_id?"default":e.enterprise_project_id)),1)]})),eip_id:s((({row:e})=>[u(j,{title:e.public_ip},{default:s((()=>[x("div",I,w(e.public_ip),1)])),_:2},1032,["title"]),u(j,{title:e.eip_id},{default:s((()=>[x("div",$,w(e.eip_id),1)])),_:2},1032,["title"])])),fw_instance_id:s((({row:e})=>[u(j,{title:e.fw_instance_name},{default:s((()=>[x("div",{class:"truncate text-primary cursor-pointer",onClick:t=>p(H)(e)},w(e.fw_instance_name),9,B)])),_:2},1032,["title"]),u(j,{title:e.fw_instance_id},{default:s((()=>[x("div",Y,w(e.fw_instance_id),1)])),_:2},1032,["title"])])),_:1},8,["table-column","auth-btn","order","query-api","title-field-search"]),u(R,{open:p(f),"onUpdate:open":a[1]||(a[1]=e=>D(f)?f.value=e:null),sid:p(P),"form-type":p(v),onEditSuccess:L},null,8,["open","sid","form-type"]),u(E,{open:p(G),"onUpdate:open":a[2]||(a[2]=e=>D(G)?G.value=e:null),title:null==(n=p(M))?void 0:n.name,"basic-config":{columns:p(o).subPageColumns,api:p(F).getDetail,sid:null==(m=p(M))?void 0:m.id},onClickEdit:a[3]||(a[3]=t=>N({type:e.$CONFIG.FORM_TYPE.EDIT_TYPE,row:p(M)}))},{region_id:s((({row:e})=>{var t,i;return[x("span",null,w((null==(i=null==(t=p(o).initTitleData)?void 0:t.region_id)?void 0:i[e.region_id])||e.region_id),1)]})),cloud_master_account_id:s((({row:e})=>{var t,i,a;return[g(w((null==(a=null==(i=null==(t=p(o).initTitleData)?void 0:t.cloud_master_account_id)?void 0:i[e.cloud_master_account_id])?void 0:a.page_display)||""),1)]})),enterprise_project_id:s((({row:e})=>{var t,i;return[g(w((null==(i=null==(t=p(o).initTitleData)?void 0:t.enterprise_project_id)?void 0:i[e.enterprise_project_id])||"0"===e.enterprise_project_id?"default":e.enterprise_project_id),1)]})),_:1},8,["open","title","basic-config"])],64)}}};export{L as default};
