import{al as o,H as t,J as s,O as a,Q as c,R as e,$ as n,U as p,Z as r,W as i,an as y,ah as l,Y as u,aU as d,F as m,cF as x,d6 as v,aZ as g}from"./index.872a2bd0.js";const S={__name:"index",props:{type:{type:String,default:"text"},content:{type:String,default:""},apiCopy:{type:Object,default:()=>({copyApi:"",copyParams:{},copySuccessText:"复制成功",copySuccessDuration:2e3,copyErrorText:"复制失败",copyErrorDuration:2e3})}},setup(S){let f=S;const{type:b,content:I,apiCopy:L}=o(f);let T=t({copyLoading:!1,copyStatus:"primary",copyIcon:"vxe-icon-copy"});s((()=>{T.copyLoading=!1,T.copyStatus="primary",T.copyIcon="vxe-icon-copy"}));const _=()=>{T.copyStatus="primary",T.copyIcon="vxe-icon-copy"},D=async()=>{var o,t,s,a,c;if("password"===b.value){T.copyLoading=!0;const{copyApi:n,copyParams:p,copySuccessText:r,copySuccessDuration:i,copyErrorText:y,copyErrorDuration:l}=L.value;try{const s=await n(p);(null==(t=null==(o=x)?void 0:o.clipboard)?void 0:t.copy(v(s)))?(T.copyStatus="success",T.copyIcon="vxe-icon-success-circle-fill",x.modal.message({status:"success",content:r||"复制成功",duration:i||2e3}),setTimeout((()=>{_()}),i||300)):x.modal.message({status:"error",content:y||"复制失败",duration:l||2e3})}catch(e){T.copyStatus="error",T.copyIcon="vxe-icon-error-circle-fill",x.modal.message({status:"error",content:(null==(a=null==(s=null==e?void 0:e.response)?void 0:s.data)?void 0:a.msg)+`${null==(c=null==e?void 0:e.response)?void 0:c.status}`||e.message||y||"复制失败",duration:l||2e3}),setTimeout((()=>{_()}),l||300)}finally{T.copyLoading=!1}}};return(o,t)=>{const s=a("vxe-button"),x=g;return c(),e(m,null,["password"===n(b)?(c(),p(s,{key:0,mode:"text",disabled:n(T).copyLoading,icon:n(T).copyIcon,status:n(T).copyStatus,loading:n(T).copyLoading,onClick:D},null,8,["disabled","icon","status","loading"])):r("",!0),"text"===n(b)?(c(),p(x,d({key:1,copyable:{text:n(I)}},o.$attrs),{default:i((()=>[y(o.$slots,"custom_title",{},(()=>[l(u(n(I)),1)]))])),_:3},16,["copyable"])):r("",!0)],64)}}};export{S as _};
