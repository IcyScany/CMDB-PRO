# 云管平台

## 一、平台概述

云管平台 是一个提供统一的云资源管理解决方案，支持阿里云、华为云以及自建私有云。平台不仅能够自动同步云上的数据到系统，还集成了自动化运维、监控等功能，实现高效的云资源管理和运维。系统支持多租户架构，提供灵活的配置管理和权限控制功能。

### 1. 系统特点
- 多租户支持
- 灵活的配置管理
- 完善的权限控制
- 丰富的组件库
- 响应式设计

### 2. 技术架构
- 前端：Vue 3 + Vite + Pinia + axios + Ant Design Vue(4.x.x)+ vxe-table(10.5.0) + eslint + JSX
- 后端：API 服务
- 数据库：关系型数据库
- 认证：基于 Token 的身份验证

## 二、系统架构

### 1. 多租户架构
- 支持多业态管理
- 租户数据隔离
- 灵活的权限分配

### 2. API 设计
- 前台 API：包含 {business} 变量和 v3 前缀
- 后台 API：包含 v3 前缀
- 登录 API：无需 {business} 变量和 v3 前缀

## 三、核心组件

### 1. OpsTable 组件
基于 vxe-table 封装的高性能表格组件
- **功能特点**
    - 本地数据处理
    - 服务端数据处理
    - 自定义列配置
    - 列宽拖拽调整
    - 列显隐控制
    - 行列合并
    - 导入导出

- **使用场景**
    - 大数据量展示
    - 复杂表格操作
    - 动态列配置
    - 数据编辑

### 2. OpsFormItem 组件
基于 Ant Design Vue Form 的高级表单项组件
- **表单类型**
    - 文本输入(input)
    - 下拉选择(select)
    - 日期选择(date-picker)
    - 数字输入(number)
    - 开关(switch)
    - 单选/多选(radio/checkbox)
    - 自定义选项(custom-option)
    - JSON编辑器
    - 富文本编辑器

- **数据源支持**
    - 静态数据
    - 远程接口
    - 自定义数据源
    - 联动数据源

### 3. OpsInputTags 组件
标签输入与管理组件
- **核心功能**
    - 标签添加/删除
    - 标签编辑
    - 标签验证
    - 标签排序
    - 最大/最小限制
    - 自定义样式

### 4. OpsASelect 组件
增强型选择器组件
- **特性支持**
    - 模糊搜索
    - 多选功能
    - 自定义选项渲染
    - 动态加载选项
    - 分组展示
    - 自定义过滤

### 5. OpsFormContainer 组件
表单容器组件
- **容器类型**
    - Modal 弹窗
    - Drawer 抽屉
- **功能特点**
    - 统一的表单布局
    - 灵活的插槽系统
    - 自动的表单验证
    - 提交状态管理

### 6. OpsCustomOption 组件
自定义选项组件
- **主要功能**
    - 选项的动态添加
    - 选项的实时编辑
    - 选项的删除
    - 选项描述支持
    - 实时数据同步

## 四、功能模块

### 1. 用户认证
```javascript
// 登录流程
1. 用户输入凭证
2. 系统验证身份
3. 获取可用业态列表
4. 用户所属业态 = 1 , 选择默认业态; 用户所属业态 > 1 , 选择用户所属业态
5. 进入系统
```

### 2. 业态管理
- 支持多业态切换
- 业态数据隔离
- 独立的配置管理

### 3. 权限控制
- 基于角色的访问控制
- 细粒度的操作权限
- 动态权限验证

## 五、开发指南

### 1. 环境配置
```bash
# 安装依赖
npm install

# 开发环境运行
npm run dev

# 生产环境构建
npm run build
```

### 2. 组件使用
```vue
<!-- 表格组件示例 -->
<ops-table
    :columns="columns"
    :data="tableData"
    :auth-btn="authConfig"
    @user-edit="handleEdit"
/>

<!-- 表单组件示例 -->
<ops-form-item
    :title="fieldConfig"
    v-model:value="formData.field"
/>
```

### 3. API 调用规范
```javascript
// 前台 API
/v3/{business}/api/resource

// 后台 API
/v3/admin/api/resource

// 登录 API
/api/login
```

## 六、部署说明

### 1. 系统要求
- Node.js >= 14.0.0
- 现代浏览器支持
- 网络环境要求


## 七、最佳实践

### 1. 开发规范
- 遵循 Vue 3 组合式 API
- 使用 JavaScript + JSX 进行开发
- 遵循统一的代码风格

### 2. 性能优化
- 合理使用缓存
- 按需加载组件
- 优化数据请求

### 3. 安全考虑
- 输入验证
- XSS 防护
- CSRF 防护
- 权限验证

## 八、常见问题

### 1. 系统配置
- Q: 如何配置多租户？
- A: 通过系统设置配置不同业态信息

### 2. 权限问题
- Q: 按钮权限不生效？
- A: 检查 authBtn 配置和用户权限

### 3. 数据加载
- Q: 数据未正确显示？
- A: 检查 API 地址和数据格式

## 九、注意事项
1. **性能考虑**
    - 控制数据量
    - 优化查询性能
    - 合理使用缓存

2. **兼容性**
    - 浏览器兼容性
    - API 版本控制 
